Index: app/src/main/java/com/example/shroomies/PostAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.content.Context;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.bumptech.glide.request.RequestOptions;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.List;\r\n\r\npublic class PostAdapter extends RecyclerView.Adapter<PostAdapter.ImageViewHolder> {\r\n    private Context mContext;\r\n    private List<Post> mPosts;\r\n\r\n    private FirebaseUser firebaseUser;\r\n    private FirebaseAuth mAuth;\r\n    final String userUid =  mAuth.getInstance().getCurrentUser().getUid();\r\n\r\n    public PostAdapter(Context context, List<Post> posts){\r\n        mContext = context;\r\n        mPosts = posts;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public PostAdapter.ImageViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(mContext).inflate(R.layout.post_item, parent, false);\r\n        return new PostAdapter.ImageViewHolder(view);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull final PostAdapter.ImageViewHolder holder, final int position) {\r\n\r\n        firebaseUser = FirebaseAuth.getInstance().getCurrentUser();\r\n        final Post post = mPosts.get(position);\r\n\r\n        Glide.with(mContext).load(post.getPostimage())\r\n                .apply(new RequestOptions().placeholder((R.drawable.ic_user_profile_svgrepo_com)))\r\n                .into(holder.post_image);\r\n\r\n        if (post.getDescription().equals(\"\")){\r\n            holder.description.setVisibility(View.GONE);\r\n        }\r\n        else {\r\n            holder.description.setVisibility(View.VISIBLE);\r\n            holder.description.setText(post.getDescription());\r\n        }\r\n\r\n        publisherInfo(holder.publisher, post.getUserID());\r\n    }\r\n\r\n    private void publisherInfo(final TextView publisher, final String userUid){\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference().child(\"Users\").child(userUid);\r\n        reference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                User user = snapshot.getValue(User.class);\r\n                publisher.setText(user.getName());\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n    @Override\r\n    public int getItemCount() {\r\n        return mPosts.size();\r\n    }\r\npublic class ImageViewHolder extends RecyclerView.ViewHolder {\r\n\r\n    public ImageView post_image;\r\n    public TextView publisher, description;\r\n\r\n    public ImageViewHolder(View itemView) {\r\n        super(itemView);\r\n\r\n        post_image = itemView.findViewById(R.id.post_image);\r\n\r\n        publisher = itemView.findViewById(R.id.userID);\r\n        description = itemView.findViewById(R.id.description);\r\n\r\n\r\n    }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/PostAdapter.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/PostAdapter.java	(date 1611247234870)
@@ -86,17 +86,16 @@
 public class ImageViewHolder extends RecyclerView.ViewHolder {
 
     public ImageView post_image;
-    public TextView publisher, description;
+    public TextView publisher, description, date;
 
     public ImageViewHolder(View itemView) {
         super(itemView);
 
         post_image = itemView.findViewById(R.id.post_image);
-
-        publisher = itemView.findViewById(R.id.userID);
+        date = itemView.findViewById(R.id.date);
+//        publisher = itemView.findViewById(R.id.userID);
         description = itemView.findViewById(R.id.description);
 
-
     }
     }
 }
\ No newline at end of file
Index: app/src/main/java/com/example/shroomies/ChattingActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.Manifest;\r\nimport android.app.ProgressDialog;\r\nimport android.content.ContentValues;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.text.TextUtils;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.ActionBar;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.example.shroomies.notifications.Data;\r\nimport com.example.shroomies.notifications.Sender;\r\nimport com.example.shroomies.notifications.Token;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.google.gson.Gson;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class ChattingActivity extends AppCompatActivity {\r\n    private boolean firstChat = false;\r\n\r\n    private ImageButton sendMessage,addImage;\r\n    private EditText messageBody;\r\n    private Toolbar chattingToolbar;\r\n    private ImageView receiverProfileImage,attacheButton;\r\n    private TextView receiverUsername;\r\n    private RecyclerView chattingRecycler;\r\n    private String receiverID,receiverName;\r\n    private FirebaseAuth mAuth;\r\n    private DatabaseReference rootRef;\r\n    private String senderID;\r\n    private String saveCurrentDate,saveCurrentTime;\r\n    private List<Messages> messagesArrayList=new ArrayList<>();\r\n    private LinearLayoutManager linearLayoutManager;\r\n    private MessagesAdapter messagesAdapter;\r\n    private boolean notify=false;\r\n    private RequestQueue requestQueue;\r\n    private static final int CAMERA_REQUEST_CODE=100;\r\n    private static final int STORAGE_REQUEST_CODE=200;\r\n    private static final int IMAGE_PICK_CAMERA_CODE=300;\r\n    private static final int IMAGE_PICK_GALLERY_CODE=400;\r\n    String[] cameraPermissions;\r\n    String[] storagePermissions;\r\n    Uri chosenImage=null;\r\n    StorageReference filePathName;\r\n    private String imageUrl;\r\n    private ValueEventListener seenLisenter;\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        rootRef.removeEventListener(seenLisenter);\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        setContentView(R.layout.activity_chatting);\r\n\r\n        receiverUsername=findViewById(R.id.receiver_username);\r\n        mAuth=FirebaseAuth.getInstance();\r\n        senderID=mAuth.getCurrentUser().getUid();\r\n        rootRef= FirebaseDatabase.getInstance().getReference();\r\n        Bundle extras = getIntent().getExtras();\r\n        if(!(extras==null)){\r\n            receiverID=extras.getString(\"USERID\");\r\n            getUserDetail(receiverID);\r\n        }\r\n        initializeViews();\r\n        sendMessage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                sendMessageToUser();\r\n            }\r\n        });\r\n\r\n\r\n        retrieveMessages();\r\n\r\n       addImage.setOnClickListener(new View.OnClickListener() {\r\n           @Override\r\n           public void onClick(View v) {\r\n                 showImagePickDialog();\r\n           }\r\n       });\r\n    }\r\n    private void initializeViews(){\r\n        chattingToolbar= findViewById(R.id.chat_toolbar);\r\n        setSupportActionBar(chattingToolbar);\r\n        ActionBar actionBar=getSupportActionBar();\r\n        actionBar.setDisplayHomeAsUpEnabled(true);\r\n        actionBar.setDisplayShowHomeEnabled(true);\r\n        actionBar.setDisplayShowTitleEnabled(false);\r\n        LayoutInflater inflater= (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n        View actionbarView=inflater.inflate(R.layout.toolbar_chatting_layout,null);\r\n        sendMessage=findViewById(R.id.send_message_button);\r\n        addImage=findViewById(R.id.choose_file_button);\r\n\r\n        messageBody=findViewById(R.id.messeg_body_edit_text);\r\n        chattingRecycler=findViewById(R.id.recycler_view_group_chatting);\r\n        receiverProfileImage=findViewById(R.id.receiver_image_profile);\r\n        chattingRecycler=findViewById(R.id.recycler_view_group_chatting);\r\n        cameraPermissions=new String[]{Manifest.permission.CAMERA,Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n        storagePermissions=new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n\r\n        linearLayoutManager=new LinearLayoutManager(this);\r\n        linearLayoutManager.setStackFromEnd(true);\r\n        chattingRecycler.setHasFixedSize(true);\r\n        chattingRecycler.setLayoutManager(linearLayoutManager);\r\n\r\n        requestQueue= Volley.newRequestQueue(getApplicationContext());\r\n    }\r\n    private void sendMessageToUser(){\r\n        final String messageText=messageBody.getText().toString();\r\n        if(TextUtils.isEmpty(messageText)){\r\n            Toast.makeText(getApplicationContext(),\"please enter a message\",Toast.LENGTH_LONG).show();\r\n        }else{\r\n            notify=true;\r\n            // referencing to database which user is send message to whom\r\n           String messageSenderRef=\"Messages/\"+senderID+\"/\"+receiverID;\r\n           String messageReceiverRef=\"Messages/\"+receiverID+\"/\"+senderID;\r\n          //create the database ref\r\n            final String messagePushId= rootRef.child(\"Messages\").child(senderID).child(receiverID).push().getKey();\r\n            //now making a unique id for each single message so that they wont be replaced and we save everything\r\n//            String messagePushId=userMessageKey.getKey();\r\n            Calendar calendarDate=Calendar.getInstance();\r\n            SimpleDateFormat currentDate=new SimpleDateFormat(\"dd-MMMM-yyyy\");\r\n            saveCurrentDate=currentDate.format(calendarDate.getTime());\r\n            Calendar calendarTime=Calendar.getInstance();\r\n            SimpleDateFormat currentTime=new SimpleDateFormat(\"HH:mm aa\");\r\n            saveCurrentTime=currentTime.format(calendarTime.getTime());\r\n            Map messageTextBody= new HashMap();\r\n            messageTextBody.put(\"message\",messageText);\r\n            messageTextBody.put(\"time\",saveCurrentTime);\r\n            messageTextBody.put(\"date\",saveCurrentDate);\r\n            messageTextBody.put(\"type\",\"text\");\r\n            messageTextBody.put(\"from\",senderID);\r\n            messageTextBody.put(\"isSeen\" , \"false\");\r\n            Map messageBodyDetails=new HashMap();\r\n            messageBodyDetails.put(messageSenderRef+\"/\"+messagePushId,messageTextBody);\r\n           messageBodyDetails.put(messageReceiverRef+\"/\"+messagePushId,messageTextBody);\r\n           rootRef.updateChildren(messageBodyDetails).addOnCompleteListener(new OnCompleteListener() {\r\n               @Override\r\n               public void onComplete(@NonNull Task task) {\r\n                   if(task.isSuccessful()){\r\n                       messageBody.setText(\"\");\r\n                       chattingRecycler.smoothScrollToPosition(messagesAdapter.getItemCount()-1);\r\n                       if(firstChat){\r\n                           addUserToInbox();\r\n                       }\r\n                   }else{\r\n                       String message =task.getException().getMessage();\r\n                       Toast.makeText(getApplicationContext(),\"Error \"+message,Toast.LENGTH_SHORT).show();\r\n                       messageBody.setText(\"\");\r\n                   }\r\n\r\n               }\r\n           });\r\n        }\r\n\r\n       rootRef.child(\"Users\").child(senderID).addValueEventListener(new ValueEventListener() {\r\n           @Override\r\n           public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n              if(snapshot.exists()){\r\n                  User user=snapshot.getValue(User.class);\r\n                  if(notify){\r\n                      sendNotification(receiverID,user.getName(),messageText);\r\n                  }\r\n                  notify=false;\r\n              }\r\n           }\r\n\r\n           @Override\r\n           public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n           }\r\n       });\r\n\r\n    }\r\n    private void sendNotification(final String receiverID,final String senderName,final String message) {\r\n        rootRef.child(\"Token\").orderByKey().equalTo(receiverID).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if (snapshot.exists()) {\r\n                    for (DataSnapshot ds : snapshot.getChildren()) {\r\n                        Token token = (Token) ds.getValue(Token.class);\r\n                        Data data = new Data(senderID, senderName + \":\" + message, \"New Message\", receiverID, (R.drawable.ic_notification_icon));\r\n                        Sender sender = new Sender(data, token.getToken());\r\n                        try {\r\n                            JSONObject senderJsonObj = new JSONObject(new Gson().toJson(sender));\r\n                            JsonObjectRequest jsonObjectRequest=new JsonObjectRequest(\"https://fcm.googleapis.com/fcm/send\", senderJsonObj, new Response.Listener<JSONObject>() {\r\n                                @Override\r\n                                public void onResponse(JSONObject response) {\r\n                                    Log.d(\"JSON_RESPONSE\",\"onResponse:\"+response.toString());\r\n                                }\r\n\r\n                            }, new Response.ErrorListener() {\r\n                                @Override\r\n                                public void onErrorResponse(VolleyError error) {\r\n                                    Log.d(\"JSON_RESPONSE\",\"onResponse:\"+error.toString());\r\n\r\n                                }\r\n                            })\r\n                            {\r\n                                @Override\r\n                                public Map<String,String> getHeaders() throws AuthFailureError {\r\n                                    Map<String,String> headers= new HashMap<>();\r\n                                    headers.put(\"Content-type\",\"application/json\");\r\n                                    headers.put(\"Authorization\",\"Key=AAAAyn_kPyQ:APA91bGLxMB-HGP-qd_EPD3wz_apYs4ZJIB2vyAvH5JbaTVlyLExgYn7ye-076FJxjfrhQ-1HJBmptN3RWHY4FoBdY08YRgplZSAN0Mnj6sLbS6imKa7w0rqPsLtc-aXMaPOhlxnXqPs\");\r\n                                    return headers;\r\n                                }\r\n\r\n                            };\r\n                            requestQueue.add(jsonObjectRequest);\r\n                            requestQueue.start();\r\n                        }catch (JSONException e){\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n    public void retrieveMessages(){\r\n        messagesArrayList = new ArrayList<>();\r\n       messagesAdapter=new MessagesAdapter(messagesArrayList , getApplication());\r\n       chattingRecycler.setAdapter(messagesAdapter);\r\n        rootRef.child(\"Messages\").child(senderID).child(receiverID).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                messagesArrayList.clear();\r\n                if(snapshot.exists()){\r\n                    for (DataSnapshot dataSnapshot:\r\n                    snapshot.getChildren()){\r\n                        Messages messages = dataSnapshot.getValue(Messages.class);\r\n                        messagesArrayList.add(messages);\r\n                    }\r\n                }\r\n                messagesAdapter.notifyDataSetChanged();\r\n                chattingRecycler.smoothScrollToPosition(chattingRecycler.getAdapter().getItemCount());\r\n                if (messagesArrayList.size()==0|| messagesArrayList==null){\r\n\r\n                    firstChat= true;\r\n                }\r\n//                else{\r\n//                    // scroll to the end of the recycler if there are messages\r\n//                    chattingRecycler.smoothScrollToPosition(messagesAdapter.getItemCount()-1);\r\n//                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n}\r\n   private void showImagePickDialog(){\r\n        String[] options={\"Camera\",\"Gallery\"};\r\n       AlertDialog.Builder builder=new AlertDialog.Builder(this);\r\n       builder.setTitle(\"Choose Image from\");\r\n       builder.setItems(options, new DialogInterface.OnClickListener() {\r\n           @Override\r\n           public void onClick(DialogInterface dialog, int which) {\r\n               //camera\r\n               if(which==0){\r\n                   if(!checkCameraPermisson()){\r\n                       requestCameraPermission();\r\n                   }\r\n                   else{\r\n                       pickFromCamera();\r\n                   }\r\n               }\r\n               //gallery\r\n               if(which==1){\r\n                   if(!checkStoragePermisson()){\r\n                       requestStoragePermission();\r\n                   }else{\r\n                       pickFromGallery();\r\n                   }\r\n               }\r\n           }\r\n       });\r\n       builder.create().show();\r\n   }\r\n   private void pickFromCamera(){\r\n       ContentValues cv= new ContentValues();\r\n       cv.put(MediaStore.Images.Media.TITLE,\"Temp Pick\");\r\n       cv.put(MediaStore.Images.Media.DESCRIPTION,\"Temp Describe\");\r\n        chosenImage=getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,cv);\r\n\r\n       Intent intent=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n       intent.putExtra(MediaStore.EXTRA_OUTPUT,chosenImage);\r\n       startActivityForResult(intent,IMAGE_PICK_CAMERA_CODE);\r\n\r\n   }\r\n   private void pickFromGallery(){\r\n       Intent intent=new Intent(Intent.ACTION_PICK);\r\n       intent.setType(\"image/*\");\r\n       startActivityForResult(intent,IMAGE_PICK_GALLERY_CODE);\r\n   }\r\n   private boolean checkStoragePermisson(){\r\n        boolean result= ContextCompat.checkSelfPermission(this,Manifest.permission.WRITE_EXTERNAL_STORAGE)==(PackageManager.PERMISSION_GRANTED);\r\n\r\n        return result;\r\n   }\r\n   private void requestStoragePermission(){\r\n       ActivityCompat.requestPermissions(this,storagePermissions,STORAGE_REQUEST_CODE);\r\n   }\r\n   private boolean checkCameraPermisson(){\r\n        boolean resultCam= ContextCompat.checkSelfPermission(this,Manifest.permission.CAMERA)==(PackageManager.PERMISSION_GRANTED);\r\n        boolean resultStorage= ContextCompat.checkSelfPermission(this,Manifest.permission.WRITE_EXTERNAL_STORAGE)==(PackageManager.PERMISSION_GRANTED);\r\n\r\n        return resultCam && resultStorage;\r\n    }\r\n    private void requestCameraPermission(){\r\n        ActivityCompat.requestPermissions(this,cameraPermissions,CAMERA_REQUEST_CODE);\r\n    }\r\n//this method is called when user oress allow or deny form permission request dialog\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        switch (requestCode){\r\n            case CAMERA_REQUEST_CODE:{\r\n                if(grantResults.length>0){\r\n\r\n                    boolean cameraAccepted=grantResults[0]==PackageManager.PERMISSION_GRANTED;\r\n                    boolean storageAccepted=grantResults[1]==PackageManager.PERMISSION_GRANTED;\r\n                    if(cameraAccepted && storageAccepted){\r\n                        pickFromCamera();\r\n                    }else{\r\n                        requestPermissions(new String[]{Manifest.permission.CAMERA}, CAMERA_REQUEST_CODE);\r\n                        Toast.makeText(this,\"Camera and storage both permissions are neccessary....\",Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }else{\r\n\r\n                }\r\n            }break;\r\n            case STORAGE_REQUEST_CODE:{\r\n                if(grantResults.length>0){\r\n                    boolean storageAccepted=grantResults[0]==PackageManager.PERMISSION_GRANTED;\r\n                    if(storageAccepted){\r\n                        pickFromGallery();\r\n                    }else{\r\n                        requestPermissions(new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_REQUEST_CODE);\r\n                        Toast.makeText(this,\" storage permission is neccessary....\",Toast.LENGTH_SHORT).show();\r\n                        pickFromGallery();\r\n\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        if(resultCode==RESULT_OK){\r\n            if(requestCode==IMAGE_PICK_GALLERY_CODE){\r\n                chosenImage=data.getData();\r\n                //Save to firebase\r\n                sendImageMessage(chosenImage);\r\n            }else if(requestCode==IMAGE_PICK_CAMERA_CODE){\r\n                sendImageMessage(chosenImage);\r\n            }\r\n        }\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n    }\r\n    private void sendImageMessage(Uri image){\r\n        notify=true;\r\n        final ProgressDialog progressDialog=new ProgressDialog(this);\r\n        progressDialog.setMessage(\"sending image...\");\r\n        progressDialog.show();\r\n        StorageReference storageReference = FirebaseStorage.getInstance().getReference();\r\n        filePathName=storageReference.child(\"chating images\").child(image.getLastPathSegment()\r\n                +System.currentTimeMillis()+\".jpg\");\r\n               filePathName.putFile(image).addOnCompleteListener(new OnCompleteListener<UploadTask.TaskSnapshot>() {\r\n                   @Override\r\n                   public void onComplete(@NonNull Task<UploadTask.TaskSnapshot> task) {\r\n                       if(task.isSuccessful()){\r\n                          progressDialog.dismiss();\r\n                           imageUrl=task.getResult().getMetadata().getReference().getPath().toString();\r\n                           addToRealTimeDataBase(imageUrl);\r\n                       }\r\n\r\n                   }\r\n               });\r\n\r\n    }\r\n    private void addToRealTimeDataBase(String url){\r\n\r\n        String messageSenderRef=\"Messages/\"+senderID+\"/\"+receiverID;\r\n        String messageReceiverRef=\"Messages/\"+receiverID+\"/\"+senderID;\r\n        //create the database ref\r\n        final String messagePushId= rootRef.child(\"Messages\").child(senderID).child(receiverID).push().getKey();\r\n        //now making a unique id for each single message so that they wont be replaced and we save everything\r\n//            String messagePushId=userMessageKey.getKey();\r\n        Calendar calendarDate=Calendar.getInstance();\r\n        SimpleDateFormat currentDate=new SimpleDateFormat(\"dd-MMMM-yyyy\");\r\n        saveCurrentDate=currentDate.format(calendarDate.getTime());\r\n        Calendar calendarTime=Calendar.getInstance();\r\n        SimpleDateFormat currentTime=new SimpleDateFormat(\"HH:mm aa\");\r\n        saveCurrentTime=currentTime.format(calendarTime.getTime());\r\n        Map messageTextBody= new HashMap();\r\n        messageTextBody.put(\"message\",url);\r\n        messageTextBody.put(\"time\",saveCurrentTime);\r\n        messageTextBody.put(\"date\",saveCurrentDate);\r\n        messageTextBody.put(\"type\",\"image\");\r\n        messageTextBody.put(\"from\",senderID);\r\n        messageTextBody.put(\"isSeen\" , \"false\");\r\n        Map messageBodyDetails=new HashMap();\r\n        messageBodyDetails.put(messageSenderRef+\"/\"+messagePushId,messageTextBody);\r\n        messageBodyDetails.put(messageReceiverRef+\"/\"+messagePushId,messageTextBody);\r\n        rootRef.updateChildren(messageBodyDetails).addOnCompleteListener(new OnCompleteListener() {\r\n            @Override\r\n            public void onComplete(@NonNull Task task) {\r\n                if(task.isSuccessful()){\r\n                    messageBody.setText(\"\");\r\n                }else{\r\n                    String message =task.getException().getMessage();\r\n                    Toast.makeText(getApplicationContext(),\"Error \"+message,Toast.LENGTH_SHORT).show();\r\n                    messageBody.setText(\"\");\r\n                }\r\n\r\n            }\r\n        });\r\n        //send Notification\r\n        rootRef.child(\"Users\").addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()){\r\n                    User user=snapshot.getValue(User.class);\r\n                    if(notify){\r\n                        sendNotification(receiverID,user.getName(),\"Sent you a photo..\");\r\n\r\n                    }\r\n                    notify=false;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void getUserDetail(final String recieverID){\r\n        rootRef.child(\"Users\").child(recieverID).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()) {\r\n                    User recieverUser = snapshot.getValue(User.class);\r\n                    if(!recieverUser.getImage().isEmpty()) {\r\n                        GlideApp.with(getApplicationContext())\r\n                                .load(recieverUser.getImage())\r\n                                .fitCenter()\r\n                                .circleCrop()\r\n                                .into(receiverProfileImage);\r\n\r\n                    }\r\n                    receiverUsername.setText(recieverUser.getName());\r\n                    messageSeen(recieverID);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    private void addUserToInbox( ){\r\n        // put the reciver details in the senders private chat list and vice versa\r\n        HashMap<String, Object> receiverDetails = new HashMap<>();\r\n        final HashMap<String, Object> senderDetails = new HashMap<>();\r\n        senderDetails.put(\"receiverID\",senderID);\r\n        receiverDetails.put(\"receiverID\",receiverID);\r\n        rootRef.child(\"PrivateChatList\").child(senderID).child(receiverID).setValue(receiverDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                if (task.isSuccessful()) {\r\n                    rootRef.child(\"PrivateChatList\").child(receiverID).child(mAuth.getInstance().getCurrentUser().getUid()).setValue(senderDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task<Void> task) {\r\n                            if (task.isSuccessful()) {\r\n\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void messageSeen(final String receiverID){\r\n        seenLisenter =rootRef.child(\"Messages\").child(senderID).child(receiverID).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()){\r\n                    for(DataSnapshot sp: snapshot.getChildren()){\r\n                        Messages messages=sp.getValue(Messages.class);\r\n                        if(messages!=null) {\r\n                            if (messages.getFrom().equals(senderID) || messages.getFrom().equals(receiverID)) {\r\n                                HashMap<String, Object> hash = new HashMap<>();\r\n                                hash.put(\"isSeen\", \"true\");\r\n                                sp.getRef().updateChildren(hash);\r\n\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // once the user  sees the messages\r\n                    //update the number of unseen messages in the badge\r\n                    MainActivity.setBadgeToNumberOfNotifications(rootRef , mAuth);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/ChattingActivity.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/ChattingActivity.java	(date 1611248333628)
@@ -575,7 +575,7 @@
 
                     // once the user  sees the messages
                     //update the number of unseen messages in the badge
-                    MainActivity.setBadgeToNumberOfNotifications(rootRef , mAuth);
+                MainActivity.setBadgeToNumberOfNotifications(rootRef , mAuth);
                 }
             }
 
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>apply plugin: 'com.android.application'\r\napply plugin: 'com.google.gms.google-services'\r\n\r\nandroid {\r\n    compileSdkVersion 29\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.shroomies\"\r\n        minSdkVersion 26\r\n        targetSdkVersion 29\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n        Properties properties = new Properties()\r\n        if (rootProject.file(\"local.properties\").exists()) {\r\n            properties.load(rootProject.file(\"local.properties\").newDataInputStream())\r\n        }\r\n        manifestPlaceholders = [ mapsApiKey : properties.getProperty(\"MAPS_API_KEY\", \"\") ]\r\n\r\n    }\r\n\r\n\r\n        buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'androidx.wear:wear:1.0.0'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    implementation 'com.google.firebase:firebase-messaging:20.1.0'\r\n    compileOnly 'com.google.android.wearable:wearable:2.6.0'\r\n    def nav_version = '2.3.1'\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\r\n    testImplementation 'junit:junit:4.13.1'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation \"androidx.cardview:cardview:1.0.0\"\r\n    implementation \"androidx.recyclerview:recyclerview:1.1.0\"\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation \"androidx.navigation:navigation-fragment:2.3.1\"\r\n    implementation \"androidx.navigation:navigation-ui:$nav_version\"\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation \"androidx.cardview:cardview:1.0.0\"\r\n    implementation \"androidx.recyclerview:recyclerview:1.1.0\"\r\n    implementation 'com.cepheuen.elegant-number-button:lib:1.0.3'\r\n    implementation 'com.aurelhubert:ahbottomnavigation:2.3.4'\r\n    implementation 'androidx.biometric:biometric:1.0.1'\r\n    implementation  'com.google.firebase:firebase-auth:20.0.1'\r\n    implementation 'com.google.android.gms:play-services-auth:15.0.1'\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'\r\n    implementation 'com.google.maps.android:android-maps-utils:2.2.0'\r\n    implementation \"com.airbnb.android:lottie:3.5.0\"\r\n    implementation \"com.google.android.gms:play-services-location:17.1.0\"\r\n    implementation \"com.google.android.gms:play-services-location:15.0.1\"\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation 'jp.wasabeef:picasso-transformations:2.0.0'\r\n    implementation 'com.github.tizisdeepan:dots:1.0.1'\r\n    api 'com.theartofdev.edmodo:android-image-cropper:2.8.+'\r\n    implementation 'de.hdodenhof:circleimageview:3.1.0'\r\n    implementation 'com.github.jd-alexander:LikeButton:0.2.3'\r\n    implementation 'com.firebaseui:firebase-ui-storage:6.4.0'\r\n    implementation 'com.firebaseui:firebase-ui-database:6.0.2'\r\n    implementation 'com.squareup.retrofit2:retrofit:2.9.0'\r\n    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'\r\n    implementation \"com.android.volley:volley:1.1.1\"\r\n    implementation 'com.google.firebase:firebase-messaging:21.0.1'\r\n    implementation 'com.google.code.gson:gson:2.8.6'\r\n    implementation 'com.google.android.material:material:1.2.0-alpha02'\r\n\r\n\r\n\r\n}\r\napply plugin: 'com.google.gms.google-services'
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/build.gradle	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/build.gradle	(date 1611247102732)
@@ -21,12 +21,13 @@
     }
 
 
-        buildTypes {
+    buildTypes {
         release {
             minifyEnabled false
             proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
         }
     }
+    buildToolsVersion '29.0.2'
 }
 
 dependencies {
@@ -79,5 +80,6 @@
 
 
 
+
 }
 apply plugin: 'com.google.gms.google-services'
\ No newline at end of file
Index: app/src/main/java/com/example/shroomies/GroupChattingActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.Manifest;\r\nimport android.app.ProgressDialog;\r\nimport android.content.ContentValues;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.text.TextUtils;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.ActionBar;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.android.volley.AuthFailureError;\r\nimport com.android.volley.RequestQueue;\r\nimport com.android.volley.Response;\r\nimport com.android.volley.VolleyError;\r\nimport com.android.volley.toolbox.JsonObjectRequest;\r\nimport com.android.volley.toolbox.Volley;\r\nimport com.example.shroomies.notifications.Data;\r\nimport com.example.shroomies.notifications.Sender;\r\nimport com.example.shroomies.notifications.Token;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.google.gson.Gson;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class GroupChattingActivity extends AppCompatActivity {\r\n    private ImageButton sendMessage,addImage;\r\n    private EditText messageBody;\r\n    private Toolbar chattingToolbar;\r\n    private ImageView groupImage;\r\n    private TextView groupNameTextview;\r\n    private RecyclerView chattingRecycler;\r\n    private String groupID;\r\n    private FirebaseAuth mAuth;\r\n    private DatabaseReference rootRef;\r\n    private String senderID;\r\n    private String saveCurrentDate,saveCurrentTime;\r\n    private Group group;\r\n    private List<Group> groupMessagesArrayList=new ArrayList<>();\r\n    private LinearLayoutManager linearLayoutManager;\r\n    private GroupMessagesAdapter groupMessagesAdapter;\r\n    private static final int CAMERA_REQUEST_CODE=100;\r\n    private static final int STORAGE_REQUEST_CODE=200;\r\n    private static final int IMAGE_PICK_CAMERA_CODE=300;\r\n    private static final int IMAGE_PICK_GALLERY_CODE=400;\r\n    String[] cameraPermissions;\r\n    String[] storagePermissions;\r\n    Uri chosenImage=null;\r\n    StorageReference filePathName;\r\n    private String imageUrl;\r\n    private ValueEventListener seenListener;\r\n    private boolean notification;\r\n    RequestQueue requestQueue;\r\n\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        rootRef.removeEventListener(seenListener);\r\n\r\n    }\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_chatting);\r\n        cameraPermissions=new String[]{Manifest.permission.CAMERA,Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n        storagePermissions=new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n        groupNameTextview=findViewById(R.id.receiver_username);\r\n        mAuth=FirebaseAuth.getInstance();\r\n        senderID=mAuth.getInstance().getCurrentUser().getUid();\r\n        rootRef= FirebaseDatabase.getInstance().getReference();\r\n        chattingToolbar= findViewById(R.id.chat_toolbar);\r\n        setSupportActionBar(chattingToolbar);\r\n        ActionBar actionBar=getSupportActionBar();\r\n        actionBar.setDisplayHomeAsUpEnabled(true);\r\n        actionBar.setDisplayShowHomeEnabled(true);\r\n        actionBar.setDisplayShowTitleEnabled(false);\r\n        //hides the title from the action bar\r\n\r\n        final LayoutInflater inflater= (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n        View actionbarView=inflater.inflate(R.layout.toolbar_chatting_layout,null);\r\n        sendMessage=findViewById(R.id.send_message_button);\r\n        addImage=findViewById(R.id.choose_file_button);\r\n        messageBody=findViewById(R.id.messeg_body_edit_text);\r\n        chattingRecycler=findViewById(R.id.recycler_view_group_chatting);\r\n        groupImage=findViewById(R.id.receiver_image_profile);\r\n        chattingRecycler=findViewById(R.id.recycler_view_group_chatting);\r\n        linearLayoutManager=new LinearLayoutManager(this);\r\n        linearLayoutManager.setStackFromEnd(true);\r\n        chattingRecycler.setHasFixedSize(true);\r\n        chattingRecycler.setLayoutManager(linearLayoutManager);\r\n        chattingRecycler.setAdapter(groupMessagesAdapter);\r\n        requestQueue= Volley.newRequestQueue(getApplicationContext());\r\n\r\n        Bundle extras = getIntent().getExtras();\r\n        if(!(extras==null)){\r\n            groupID=extras.getString(\"GROUPID\");\r\n\r\n            //gets the  group details and sets them to the group variable\r\n            getGroupDetails();\r\n            loadMessages();\r\n        }\r\n        groupImage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent=new Intent(getApplicationContext(),GroupInfoActivity.class);\r\n                intent.putExtra(\"GROUPID\",groupID);\r\n                startActivity(intent);\r\n\r\n            }\r\n        });\r\n\r\n        sendMessage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                sendMessageToGroup();\r\n            }\r\n        });\r\n        addImage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                showImagePickDialog(); }\r\n        });\r\n    }\r\n    public void sendMessageToGroup(){\r\n        String messageText=messageBody.getText().toString();\r\n        if(TextUtils.isEmpty(messageText)){\r\n            Toast.makeText(getApplicationContext(),\"please enter a message\",Toast.LENGTH_LONG).show();\r\n        }else {\r\n            notification=true;\r\n            DatabaseReference reference = rootRef.child(\"GroupChats\").child(groupID).child(\"Messages\").push();\r\n            //now making a unique id for each single message so that they wont be replaced and we save everything\r\n            String messagePushId=reference.getKey();\r\n            Calendar calendarDate=Calendar.getInstance();\r\n            SimpleDateFormat currentDate=new SimpleDateFormat(\"dd-MMMM-yyyy\");\r\n            saveCurrentDate=currentDate.format(calendarDate.getTime());\r\n            Calendar calendarTime=Calendar.getInstance();\r\n            SimpleDateFormat currentTime=new SimpleDateFormat(\"HH:mm aa\");\r\n            saveCurrentTime=currentTime.format(calendarTime.getTime());\r\n            //unique name for each message\r\n            final String uniqueName=messagePushId+saveCurrentDate+saveCurrentTime;\r\n            Map messageDetails= new HashMap();\r\n            messageDetails.put(\"message\",messageText);\r\n            messageDetails.put(\"time\",saveCurrentTime);\r\n            messageDetails.put(\"date\",saveCurrentDate);\r\n            messageDetails.put(\"type\",\"text\");\r\n            messageDetails.put(\"from\",senderID);\r\n            HashMap<String, Object> seenBy = new HashMap<>();\r\n            // add each members id with false next to it\r\n            // this is going to act like the is isseen in the chatting  activity\r\n            for(String id\r\n                    :group.getGroupMembers()){\r\n                seenBy.put(id ,\"false\");\r\n            }\r\n\r\n            messageDetails.put(\"seenBy\" ,seenBy );\r\n\r\n\r\n            reference.updateChildren(messageDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                @Override\r\n                public void onComplete(@NonNull Task<Void> task) {\r\n                    if(task.isSuccessful()){\r\n                        messageBody.setText(\"\");\r\n                        chattingRecycler.smoothScrollToPosition(groupMessagesAdapter.getItemCount()-1);\r\n                    }else{\r\n                        String message =task.getException().getMessage();\r\n                        Toast.makeText(getApplicationContext(),\"Error \"+message,Toast.LENGTH_SHORT).show();\r\n                        messageBody.setText(\"\");\r\n                    }\r\n                }\r\n            });\r\n            if(notification){\r\n\r\n                for (String id\r\n                     :group.getGroupMembers()){\r\n                    sendNotification(id,group.getGroupName(), messageText);\r\n                }\r\n            }else{\r\n                notification=false;\r\n\r\n            }\r\n        }\r\n        }\r\n        void loadMessages(){\r\n            groupMessagesArrayList = new ArrayList<>();\r\n            groupMessagesAdapter=new GroupMessagesAdapter(groupMessagesArrayList,getApplicationContext());\r\n            chattingRecycler.setAdapter(groupMessagesAdapter);\r\n            rootRef.child(\"GroupChats\").child(groupID).child(\"Messages\").addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    groupMessagesArrayList.clear();\r\n                    if(snapshot.exists()){\r\n                        for(DataSnapshot dataSnapshot\r\n                                :snapshot.getChildren()) {\r\n                            Group groupMessages = dataSnapshot.getValue(Group.class);\r\n                            groupMessagesArrayList.add(groupMessages);\r\n                        }\r\n                        groupMessagesAdapter.notifyDataSetChanged();\r\n\r\n                    }else{ }\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        }\r\n        private void getGroupDetails(){\r\n            rootRef.child(\"GroupChats\").child(groupID).addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    if(snapshot.exists()){\r\n                            group = snapshot.getValue(Group.class);\r\n                            groupNameTextview.setText(group.getGroupName());\r\n\r\n                            GlideApp.with(getApplicationContext())\r\n                                    .load(group.getGroupImage())\r\n                                    .fitCenter()\r\n                                    .circleCrop()\r\n                                    .into(groupImage);\r\n                            groupNameTextview.setText(group.getGroupName());\r\n                            messageSeen();\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        }\r\n    private void showImagePickDialog(){\r\n        String[] options={\"Camera\",\"Gallery\"};\r\n        AlertDialog.Builder builder=new AlertDialog.Builder(this);\r\n        builder.setTitle(\"Choose Image from\");\r\n        builder.setItems(options, new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                //camera\r\n                if(which==0){\r\n                    if(!checkCameraPermisson()){\r\n                        requestCameraPermission();\r\n                    }\r\n                    else{\r\n                        pickFromCamera();\r\n                    }\r\n                }\r\n                //gallery\r\n                if(which==1){\r\n                    if(!checkStoragePermisson()){\r\n                        requestStoragePermission();\r\n                    }else{\r\n                        pickFromGallery();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        builder.create().show();\r\n    }\r\n    private void pickFromCamera(){\r\n        ContentValues cv= new ContentValues();\r\n        cv.put(MediaStore.Images.Media.TITLE,\"Temp Pick\");\r\n        cv.put(MediaStore.Images.Media.DESCRIPTION,\"Temp Describe\");\r\n        chosenImage=getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,cv);\r\n        Intent intent=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n        intent.putExtra(MediaStore.EXTRA_OUTPUT,chosenImage);\r\n        startActivityForResult(intent,IMAGE_PICK_CAMERA_CODE);\r\n\r\n    }\r\n    private void pickFromGallery(){\r\n        Intent intent=new Intent(Intent.ACTION_PICK);\r\n        intent.setType(\"image/*\");\r\n        startActivityForResult(intent,IMAGE_PICK_GALLERY_CODE);\r\n    }\r\n    private boolean checkStoragePermisson(){\r\n        boolean result= ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE)==(PackageManager.PERMISSION_GRANTED);\r\n\r\n        return result;\r\n    }\r\n    private void requestStoragePermission(){\r\n        ActivityCompat.requestPermissions(this,storagePermissions,STORAGE_REQUEST_CODE);\r\n    }\r\n    private boolean checkCameraPermisson(){\r\n        boolean resultCam= ContextCompat.checkSelfPermission(this,Manifest.permission.CAMERA)==(PackageManager.PERMISSION_GRANTED);\r\n        boolean resultStorage= ContextCompat.checkSelfPermission(this,Manifest.permission.WRITE_EXTERNAL_STORAGE)==(PackageManager.PERMISSION_GRANTED);\r\n\r\n        return resultCam && resultStorage;\r\n    }\r\n    private void requestCameraPermission(){\r\n        ActivityCompat.requestPermissions(this,cameraPermissions,CAMERA_REQUEST_CODE);\r\n    }\r\n    //this method is called when user oress allow or deny form permission request dialog\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        switch (requestCode){\r\n            case CAMERA_REQUEST_CODE:{\r\n                if(grantResults.length>0){\r\n                    boolean cameraAccepted=grantResults[0]==PackageManager.PERMISSION_GRANTED;\r\n                    boolean storageAccepted=grantResults[1]==PackageManager.PERMISSION_GRANTED;\r\n                    if(cameraAccepted && storageAccepted){\r\n                        pickFromCamera();\r\n\r\n\r\n                    }else{\r\n                        requestPermissions(new String[]{Manifest.permission.CAMERA}, CAMERA_REQUEST_CODE);\r\n                        Toast.makeText(this,\"Camera and storage both permissions are neccessary....\",Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }else{\r\n\r\n                }\r\n            }break;\r\n            case STORAGE_REQUEST_CODE:{\r\n                if(grantResults.length>0){\r\n                    boolean storageAccepted=grantResults[0]==PackageManager.PERMISSION_GRANTED;\r\n                    if(storageAccepted){\r\n                        pickFromGallery();\r\n                    }else{\r\n                        requestPermissions(new String[]{Manifest.permission.READ_EXTERNAL_STORAGE}, STORAGE_REQUEST_CODE);\r\n                        Toast.makeText(this,\" storage permission is neccessary....\",Toast.LENGTH_SHORT).show();\r\n                        pickFromGallery();\r\n\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        if(resultCode==RESULT_OK){\r\n            if(requestCode==IMAGE_PICK_GALLERY_CODE){\r\n                chosenImage=data.getData();\r\n                //Save to firebase\r\n                sendImageMessage(chosenImage);\r\n            }else if(requestCode==IMAGE_PICK_CAMERA_CODE){\r\n                sendImageMessage(chosenImage);\r\n            }\r\n        }\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n    }\r\n    private void sendImageMessage(Uri image){\r\n        notification=true;\r\n        final ProgressDialog progressDialog=new ProgressDialog(this);\r\n        progressDialog.setMessage(\"sending image...\");\r\n        progressDialog.show();\r\n        StorageReference storageReference = FirebaseStorage.getInstance().getReference();\r\n        filePathName=storageReference.child(\"chating images\").child(image.getLastPathSegment()\r\n                +System.currentTimeMillis()+\".jpg\");\r\n        filePathName.putFile(image).addOnCompleteListener(new OnCompleteListener<UploadTask.TaskSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<UploadTask.TaskSnapshot> task) {\r\n                if(task.isSuccessful()){\r\n                    progressDialog.dismiss();\r\n                    imageUrl=task.getResult().getMetadata().getReference().getPath().toString();\r\n                    addToRealTimeDataBase(imageUrl);\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n    private void addToRealTimeDataBase(String url){\r\n\r\n        DatabaseReference reference = rootRef.child(\"GroupChats\").child(groupID).child(\"Messages\").push();\r\n        //now making a unique id for each single message so that they wont be replaced and we save everything\r\n        String messagePushId=reference.getKey();\r\n        Calendar calendarDate=Calendar.getInstance();\r\n        SimpleDateFormat currentDate=new SimpleDateFormat(\"dd-MMMM-yyyy\");\r\n        saveCurrentDate=currentDate.format(calendarDate.getTime());\r\n        Calendar calendarTime=Calendar.getInstance();\r\n        SimpleDateFormat currentTime=new SimpleDateFormat(\"HH:mm aa\");\r\n        saveCurrentTime=currentTime.format(calendarTime.getTime());\r\n        //unique name for each message\r\n        final String uniqueName=messagePushId+saveCurrentDate+saveCurrentTime;\r\n        Map messageDetails= new HashMap();\r\n        messageDetails.put(\"message\",url);\r\n        messageDetails.put(\"time\",saveCurrentTime);\r\n        messageDetails.put(\"date\",saveCurrentDate);\r\n        messageDetails.put(\"type\",\"image\");\r\n        messageDetails.put(\"from\",senderID);\r\n\r\n        // create a seen by node and add it inside the message\r\n        HashMap<String, Object> seenBy = new HashMap<>();\r\n        // add each members id with false next to it\r\n        // this is going to act like the is isseen in the chatting  activity\r\n        for(String id\r\n        :group.getGroupMembers()){\r\n            seenBy.put(id ,\"false\");\r\n        }\r\n\r\n        messageDetails.put(\"seenBy\" ,seenBy );\r\n\r\n\r\n        reference.updateChildren(messageDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                if(task.isSuccessful()){\r\n                    Toast.makeText(getApplicationContext(),\"id: \"+uniqueName ,Toast.LENGTH_SHORT).show();\r\n                    messageBody.setText(\"\");\r\n                }else{\r\n                    String message =task.getException().getMessage();\r\n                    Toast.makeText(getApplicationContext(),\"Error \"+message,Toast.LENGTH_SHORT).show();\r\n                    messageBody.setText(\"\");\r\n                }\r\n            }\r\n        });\r\n\r\n        if(notification){\r\n\r\n            for (String id\r\n                    :group.getGroupMembers()){\r\n                sendNotification(id,group.getGroupName(), \"image\");\r\n            }\r\n        }else{\r\n            notification=false;\r\n\r\n        }\r\n    }\r\n    private void messageSeen() {\r\n        seenListener = rootRef.child(\"GroupChats\").child(groupID).child(\"Messages\").addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()){\r\n                    for(DataSnapshot dataSnapshot\r\n                            :snapshot.getChildren()){\r\n                        dataSnapshot.child(\"seenBy\").child(mAuth.getCurrentUser().getUid()).getRef().setValue(\"true\");\r\n                    }\r\n                    MainActivity.setBadgeToNumberOfNotifications(rootRef, mAuth);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n    private void sendNotification(final String receiverID,final String senderName,final String message) {\r\n        rootRef.child(\"Token\").orderByKey().equalTo(receiverID).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if (snapshot.exists()) {\r\n                    for (DataSnapshot ds : snapshot.getChildren()) {\r\n                        Token token = (Token) ds.getValue(Token.class);\r\n                        Data data = new Data(senderID, senderName + \":\" + message, \"New Message\", receiverID, (R.drawable.ic_notification_icon));\r\n                        Sender sender = new Sender(data, token.getToken());\r\n                        try {\r\n                            JSONObject senderJsonObj = new JSONObject(new Gson().toJson(sender));\r\n                            JsonObjectRequest jsonObjectRequest=new JsonObjectRequest(\"https://fcm.googleapis.com/fcm/send\", senderJsonObj, new Response.Listener<JSONObject>() {\r\n                                @Override\r\n                                public void onResponse(JSONObject response) {\r\n\r\n                                    Log.d(\"JSON_RESPONSE\",\"onResponse:\"+response.toString());\r\n                                }\r\n\r\n                            }, new Response.ErrorListener() {\r\n                                @Override\r\n                                public void onErrorResponse(VolleyError error) {\r\n                                    Log.d(\"JSON_RESPONSE\",\"onResponse:\"+error.toString());\r\n\r\n                                }\r\n                            })\r\n                            {\r\n                                @Override\r\n                                public Map<String,String> getHeaders() throws AuthFailureError {\r\n                                    Map<String,String> headers= new HashMap<>();\r\n                                    headers.put(\"Content-type\",\"application/json\");\r\n                                    headers.put(\"Authorization\",\"Key=AAAAyn_kPyQ:APA91bGLxMB-HGP-qd_EPD3wz_apYs4ZJIB2vyAvH5JbaTVlyLExgYn7ye-076FJxjfrhQ-1HJBmptN3RWHY4FoBdY08YRgplZSAN0Mnj6sLbS6imKa7w0rqPsLtc-aXMaPOhlxnXqPs\");\r\n                                    return headers;\r\n                                }\r\n\r\n                            };\r\n\r\n                            requestQueue.add(jsonObjectRequest);\r\n                            requestQueue.start();\r\n                        }catch (JSONException e){\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/GroupChattingActivity.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/GroupChattingActivity.java	(date 1611247891703)
@@ -469,7 +469,7 @@
                             :snapshot.getChildren()){
                         dataSnapshot.child("seenBy").child(mAuth.getCurrentUser().getUid()).getRef().setValue("true");
                     }
-                    MainActivity.setBadgeToNumberOfNotifications(rootRef, mAuth);
+//                    MainActivity.setBadgeToNumberOfNotifications(rootRef, mAuth);
                 }
             }
 
Index: app/src/main/java/com/example/shroomies/Favorite.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport com.google.android.material.tabs.TabItem;\r\nimport com.google.android.material.tabs.TabLayout;\r\n\r\n\r\npublic class Favorite extends Fragment {\r\n\r\n    TabLayout tabFav;\r\n    TabItem tabApt, tabPost;\r\n    ViewPager VPfav;\r\n\r\n\r\n   View v;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        v=inflater.inflate(R.layout.fragment_my_favorite, container, false);\r\n    return v;\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        tabFav = (TabLayout) v.findViewById(R.id.tab_layout_Fav);\r\n        tabApt = (TabItem) v.findViewById(R.id.tab_button_fav_apartment);\r\n        tabPost = (TabItem) v.findViewById(R.id.tab_button_fav_personal);\r\n        VPfav = (ViewPager) v.findViewById(R.id.VP_fav);\r\n        final FavoritePageAdapter pageAdapter = new FavoritePageAdapter(getChildFragmentManager(), tabFav.getTabCount());\r\n        VPfav.setAdapter(pageAdapter);\r\n\r\n        tabFav.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\r\n            @Override\r\n            public void onTabSelected(TabLayout.Tab tab) {\r\n                VPfav.setCurrentItem(tab.getPosition());\r\n\r\n                if ((tab.getPosition() == 0 )|| (tab.getPosition() == 1))\r\n                    pageAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onTabUnselected(TabLayout.Tab tab) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTabReselected(TabLayout.Tab tab) {\r\n\r\n            }\r\n        });\r\n        VPfav.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(tabFav));\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/Favorite.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/Favorite.java	(date 1611248724652)
@@ -13,7 +13,6 @@
 import com.google.android.material.tabs.TabItem;
 import com.google.android.material.tabs.TabLayout;
 
-
 public class Favorite extends Fragment {
 
     TabLayout tabFav;
@@ -21,13 +20,13 @@
     ViewPager VPfav;
 
 
-   View v;
+    View v;
     @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
                              Bundle savedInstanceState) {
         // Inflate the layout for this fragment
         v=inflater.inflate(R.layout.fragment_my_favorite, container, false);
-    return v;
+        return v;
     }
 
     @Override
@@ -40,7 +39,7 @@
         final FavoritePageAdapter pageAdapter = new FavoritePageAdapter(getChildFragmentManager(), tabFav.getTabCount());
         VPfav.setAdapter(pageAdapter);
 
-        tabFav.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {
+        tabFav.setOnTabSelectedListener(new TabLayout.BaseOnTabSelectedListener(){
             @Override
             public void onTabSelected(TabLayout.Tab tab) {
                 VPfav.setCurrentItem(tab.getPosition());
Index: app/src/main/java/com/example/shroomies/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.ActionBarDrawerToggle;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.view.GravityCompat;\r\nimport androidx.drawerlayout.widget.DrawerLayout;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\n\r\nimport com.example.shroomies.notifications.FirebaseMessaging;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.material.badge.BadgeDrawable;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.android.material.navigation.NavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.iid.FirebaseInstanceId;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    public static String updatedAdresses;\r\n    public static LatLng updatedLatLng;\r\n    DrawerLayout drawerLayout;\r\n    ActionBarDrawerToggle barDrawerToggle;\r\n    Toolbar toolbar;\r\n    NavigationView navigationView;\r\n    static BottomNavigationView btm_view;\r\n    FragmentTransaction ft;\r\n    FragmentManager fm;\r\n    ImageView myShroomies;\r\n    TextView usernameDrawer;\r\n    FirebaseUser user;\r\n    FirebaseAuth mAuth;\r\n    FirebaseAuth.AuthStateListener authStateListener;\r\n    SessionManager sessionManager;\r\n    FirebaseMessaging firebaseMessaging;\r\n    BadgeDrawable inboxNotificationBadge;\r\n    DatabaseReference rootRef;\r\n\r\n    @SuppressLint(\"RestrictedApi\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        //Creating session in main activity\r\n        Bundle extras = getIntent().getExtras();\r\n        if(extras!=null){\r\n            String userID = extras.getString(\"ID\");\r\n            String userEmail=extras.getString(\"EMAIL\");\r\n            sessionManager=new SessionManager(getApplicationContext(),userID);\r\n            sessionManager.createSession(userID,userEmail);\r\n            firebaseMessaging = new FirebaseMessaging();\r\n            firebaseMessaging.onNewToken(FirebaseInstanceId.getInstance().getToken());\r\n\r\n        }\r\n        rootRef = FirebaseDatabase.getInstance().getReference();\r\n        btm_view = findViewById(R.id.bottomNavigationView);\r\n        drawerLayout = (DrawerLayout) findViewById(R.id.drawerLayout);\r\n        toolbar = (Toolbar) findViewById(R.id.toolbar);\r\n        usernameDrawer=findViewById(R.id.drawer_nav_profile_name);\r\n        setSupportActionBar(toolbar);\r\n        getFragment(new FindRoommate());\r\n        barDrawerToggle = new ActionBarDrawerToggle(this, drawerLayout, toolbar, R.string.open, R.string.close);\r\n        barDrawerToggle.syncState();\r\n        drawerLayout.addDrawerListener(barDrawerToggle);\r\n        barDrawerToggle.setDrawerIndicatorEnabled(true);\r\n        navigationView = (NavigationView) findViewById(R.id.navigationView);\r\n        navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {\r\n                drawerLayout.closeDrawer(GravityCompat.START);\r\n                if(menuItem.getItemId()==R.id.setting_menu){\r\n                    getFragment(new MyShroomies());\r\n                }if(menuItem.getItemId()==R.id.my_archive_menu){\r\n                    getFragment(new Archive());\r\n                }if(menuItem.getItemId()==R.id.my_favorite_menu){\r\n                    getFragment(new Favorite());\r\n\r\n                }if(menuItem.getItemId()==R.id.my_requests_menu){\r\n                    getFragment(new Request());\r\n                }if(menuItem.getItemId()==R.id.logout){\r\n                    sessionManager.logout();\r\n                    Intent intent= new Intent(getApplicationContext(),LoginActivity.class);\r\n                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n                    startActivity(intent);\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n        btm_view.setOnNavigationItemSelectedListener(new BottomNavigationView.OnNavigationItemSelectedListener(){\r\n\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {\r\n                if(menuItem.getItemId()==R.id.find_roomie_menu){\r\n                    getFragment(new FindRoommate());\r\n                }if(menuItem.getItemId()==R.id.publish_post_menu){\r\n                    getFragment(new PublishPost());\r\n                }if(menuItem.getItemId()==R.id.message_inbox_menu){\r\n                   Intent intent= new Intent(getApplicationContext(),MessageInbox.class);\r\n                   startActivity(intent);\r\n                }if(menuItem.getItemId()==R.id.user_profile_menu){\r\n                    getFragment(new UserProfile());\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n        myShroomies=findViewById(R.id.logo_toolbar);\r\n        myShroomies.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                getFragment(new MyShroomies());\r\n            }\r\n        });\r\n        setBadgeToNumberOfNotifications(rootRef,mAuth);\r\n\r\n    }\r\n\r\n\r\n    private void getFragment (Fragment fragment) {\r\n        fm = getSupportFragmentManager();\r\n        ft = fm.beginTransaction();\r\n        ft.addToBackStack(null);\r\n        ft.replace(R.id.fragmentContainer, fragment);\r\n        ft.commit();\r\n    }\r\n\r\n   static void setBadgeToNumberOfNotifications(final DatabaseReference rootRef , final FirebaseAuth mAuth){\r\n        // get the number of unseen\r\n       // private messages\r\n        final List<Messages> unSeenMessageList = new ArrayList<>();\r\n        rootRef.child(\"Messages\").child(mAuth.getInstance().getCurrentUser().getUid()).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()){\r\n                    for (DataSnapshot dataSnapshot\r\n                    :snapshot.getChildren()){\r\n                        for (DataSnapshot dataSnapshot1:\r\n                        dataSnapshot.getChildren()){\r\n                            Messages message= dataSnapshot1.getValue(Messages.class);\r\n                            if (!message.getIsSeen().equals(\"true\")){\r\n                                unSeenMessageList.add(message);\r\n                        }\r\n\r\n                        }\r\n                    }\r\n\r\n\r\n                }\r\n                getUnseenGroupMessages(rootRef, mAuth,unSeenMessageList.size());\r\n                unSeenMessageList.clear();\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n    private static  void getUnseenGroupMessages(final DatabaseReference  rootRef , final FirebaseAuth mAuth, final int unseenPrivetMsgs ){\r\n        //get the number of unseen group messages\r\n        final ArrayList<String> unseenGroupMessages  = new ArrayList<>();\r\n        rootRef.child(\"GroupChatList\").child(mAuth.getInstance().getCurrentUser().getUid()).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if (snapshot.exists()){\r\n                    for (final DataSnapshot ds:\r\n                            snapshot.getChildren()) {\r\n                        rootRef.child(\"GroupChats\").child(ds.getKey()).child(\"Messages\").addValueEventListener(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                if (snapshot.exists()){\r\n                                    unseenGroupMessages.clear();\r\n                                    for (DataSnapshot dataSnapshot\r\n                                            :snapshot.getChildren()){\r\n                                        for (DataSnapshot snapshot1\r\n                                                :dataSnapshot.child(\"seenBy\").getChildren()){\r\n                                            if(snapshot1.getKey().equals(mAuth.getInstance().getCurrentUser().getUid())&&snapshot1.getValue().equals(\"false\")){\r\n                                                unseenGroupMessages.add(snapshot1.getValue().toString());\r\n                                            }\r\n                                        }\r\n                                    }\r\n\r\n                                    btm_view.getOrCreateBadge(R.id.message_inbox_menu).setNumber(unseenGroupMessages.size()+unseenPrivetMsgs);\r\n\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/MainActivity.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/MainActivity.java	(date 1611248198777)
@@ -115,8 +115,8 @@
                 }if(menuItem.getItemId()==R.id.publish_post_menu){
                     getFragment(new PublishPost());
                 }if(menuItem.getItemId()==R.id.message_inbox_menu){
-                   Intent intent= new Intent(getApplicationContext(),MessageInbox.class);
-                   startActivity(intent);
+                    Intent intent= new Intent(getApplicationContext(),MessageInbox.class);
+                    startActivity(intent);
                 }if(menuItem.getItemId()==R.id.user_profile_menu){
                     getFragment(new UserProfile());
                 }
@@ -143,22 +143,22 @@
         ft.commit();
     }
 
-   static void setBadgeToNumberOfNotifications(final DatabaseReference rootRef , final FirebaseAuth mAuth){
+    static void setBadgeToNumberOfNotifications(final DatabaseReference rootRef , final FirebaseAuth mAuth){
         // get the number of unseen
-       // private messages
+        // private messages
         final List<Messages> unSeenMessageList = new ArrayList<>();
         rootRef.child("Messages").child(mAuth.getInstance().getCurrentUser().getUid()).addValueEventListener(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
                 if(snapshot.exists()){
                     for (DataSnapshot dataSnapshot
-                    :snapshot.getChildren()){
+                            :snapshot.getChildren()){
                         for (DataSnapshot dataSnapshot1:
-                        dataSnapshot.getChildren()){
+                                dataSnapshot.getChildren()){
                             Messages message= dataSnapshot1.getValue(Messages.class);
                             if (!message.getIsSeen().equals("true")){
                                 unSeenMessageList.add(message);
-                        }
+                            }
 
                         }
                     }
Index: .idea/shelf/Uncommitted_changes_before_Update_at_13-Jan-21_15_28_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_13-Jan-21_15_28_[Default_Changelist]/shelved.patch	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_13-Jan-21_15_28_[Default_Changelist]/shelved.patch	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
@@ -1,1233 +0,0 @@
-Index: app/src/main/res/layout/fragment_user_profile.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".UserProfile\">\r\n    <TextView\r\n        android:id=\"@+id/tv_my_profile\"\r\n        android:layout_width=\"289dp\"\r\n        android:layout_height=\"70dp\"\r\n        android:layout_marginTop=\"264dp\"\r\n        android:layout_marginEnd=\"60dp\"\r\n        android:text=\"profile\"\r\n        android:textAllCaps=\"true\"\r\n        android:textSize=\"36sp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/edit_profile_button_my_profile\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@+id/tv_my_profile\"\r\n        android:text=\"edit profile\"\r\n        >\r\n\r\n    </Button>\r\n\r\n</RelativeLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_user_profile.xml	(revision 2cfe63513da0dc90e980ed1feb4dd8265400dedc)
-+++ app/src/main/res/layout/fragment_user_profile.xml	(date 1610526576784)
-@@ -5,26 +5,134 @@
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-     tools:context=".UserProfile">
--    <TextView
--        android:id="@+id/tv_my_profile"
--        android:layout_width="289dp"
--        android:layout_height="70dp"
--        android:layout_marginTop="264dp"
--        android:layout_marginEnd="60dp"
--        android:text="profile"
--        android:textAllCaps="true"
--        android:textSize="36sp"
--        app:layout_constraintEnd_toEndOf="parent"
--        app:layout_constraintTop_toTopOf="parent" />
-+
-+    <androidx.cardview.widget.CardView
-+        android:id="@+id/tv_my_profile"
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content">
-+
-+        <RelativeLayout
-+            android:layout_width="match_parent"
-+            android:layout_height="200dp">
-+
-+
-+            <ImageView
-+                android:id="@+id/profile_image"
-+                android:layout_width="wrap_content"
-+                android:layout_height="94dp"
-+                android:layout_alignParentLeft="true"
-+                android:layout_alignParentTop="true"
-+                android:layout_centerHorizontal="true"
-+                android:layout_marginHorizontal="20dp"
-+                android:layout_marginVertical="20dp"
-+                android:layout_marginStart="20dp"
-+                android:layout_marginLeft="20dp"
-+                android:layout_marginTop="36dp"
-+                android:layout_marginBottom="5dp"
-+                android:background="@drawable/circle_white_button"
-+                android:padding="10dp"
-+                android:src="@drawable/ic_user_profile_svgrepo_com"></ImageView>
-+
-+            <TextView
-+                android:id="@+id/view_username"
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_alignParentTop="true"
-+                android:layout_alignParentEnd="true"
-+                android:layout_marginStart="22dp"
-+                android:layout_marginLeft="20dp"
-+                android:layout_marginTop="21dp"
-+                android:layout_marginEnd="205dp"
-+                android:layout_marginRight="10dp"
-+                android:layout_toEndOf="@+id/profile_image"
-+                android:text=" "
-+                android:textColor="#131212"
-+                android:textSize="20sp"
-+                android:textStyle="bold">
-+
-+            </TextView>
-+
-+            <TextView
-+                android:id="@+id/view_bio"
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_below="@+id/view_username"
-+                android:layout_alignParentStart="true"
-+                android:layout_alignParentEnd="true"
-+                android:layout_marginStart="122dp"
-+                android:layout_marginLeft="20dp"
-+                android:layout_marginTop="3dp"
-+                android:layout_marginEnd="199dp"
-+                android:layout_marginRight="10dp"
-+                android:text=" "
-+                android:textColor="#0E0E0E"
-+                android:textSize="20sp"
-+                android:textStyle="bold">
-+
-+            </TextView>
-+
-+            <TextView
-+                android:id="@+id/number_posts"
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_alignParentEnd="true"
-+                android:layout_marginStart="94dp"
-+                android:layout_marginLeft="20dp"
-+                android:layout_marginTop="11dp"
-+                android:layout_marginEnd="10dp"
-+                android:layout_marginRight="10dp"
-+                android:layout_marginBottom="93dp"
-+                android:layout_alignParentRight="true"
-+                android:text=" "
-+                ></TextView>
- 
--    <Button
--        android:id="@+id/edit_profile_button_my_profile"
--        android:layout_width="wrap_content"
-+            <Button
-+                android:id="@+id/edit_profile_button_my_profile"
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:layout_alignParentBottom="true"
-+                android:layout_marginEnd="2dp"
-+                android:text="edit profile">
-+
-+            </Button>
-+
-+        </RelativeLayout>
-+    </androidx.cardview.widget.CardView>
-+
-+    <TextView
-+        android:id="@+id/posts"
-+        android:layout_width="match_parent"
-         android:layout_height="wrap_content"
-         android:layout_below="@+id/tv_my_profile"
--        android:text="edit profile"
--        >
-+        android:layout_marginTop="5dp"
-+        android:text="My Posts"
-+        android:textColor="#070707"
-+        android:textSize="20sp"
-+        android:textStyle="bold"
-+        android:padding="10dp"
-+        android:layout_marginLeft="5dp"/>
-+
-+    <FrameLayout
-+        android:id="@+id/frame_my_posts"
-+        android:layout_width="288dp"
-+        android:layout_height="466dp"
-+        android:layout_below="@+id/posts"
-+        android:layout_marginTop="10dp">
-+
-+
-+
-+                <ListView
-+
-+                    android:id="@+id/view_my_posts"
-+                    android:layout_width="wrap_content"
-+                    android:layout_height="wrap_content"
-+                    android:layout_marginTop="20dp"
-+
-+                    android:background="@color/white">
-+
- 
--    </Button>
-+                </ListView>
-+    </FrameLayout>
-+
- 
- </RelativeLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/shroomies/UserProfile.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.shroomies;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\n\r\n\r\npublic class UserProfile extends Fragment {\r\n    Button editProfile;\r\n    FragmentManager fm;\r\n    FragmentTransaction ft;\r\n\r\n   View v;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        v=inflater.inflate(R.layout.fragment_user_profile, container, false);\r\n        editProfile = v.findViewById(R.id.edit_profile_button_my_profile);\r\n\r\n        return v;\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        editProfile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                getFragment(new EditProfile());\r\n            }\r\n        });\r\n    }\r\n\r\n    private void getFragment (Fragment fragment) {\r\n        fm = getActivity().getSupportFragmentManager();\r\n        ft = fm.beginTransaction();\r\n        ft.addToBackStack(null);\r\n        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);\r\n        ft.replace(R.id.fragmentContainer, fragment);\r\n        ft.commit();\r\n    }\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/shroomies/UserProfile.java	(revision 2cfe63513da0dc90e980ed1feb4dd8265400dedc)
-+++ app/src/main/java/com/example/shroomies/UserProfile.java	(date 1610531911596)
-@@ -12,10 +12,33 @@
- import android.view.View;
- import android.view.ViewGroup;
- import android.widget.Button;
-+import android.widget.ImageView;
-+import android.widget.TextView;
-+
-+import com.bumptech.glide.Glide;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.auth.FirebaseUser;
-+import com.google.firebase.database.DataSnapshot;
-+import com.google.firebase.database.DatabaseError;
-+import com.google.firebase.database.DatabaseReference;
-+import com.google.firebase.database.FirebaseDatabase;
-+import com.google.firebase.database.ValueEventListener;
- 
- 
- public class UserProfile extends Fragment {
--    Button editProfile;
-+    private Button editProfile;
-+    private TextView viewUsername;
-+    private TextView viewBio;
-+    private TextView numPosts;
-+    private ImageView profileImage;
-+
-+    private FirebaseUser mUser;
-+    private FirebaseAuth mAuth;
-+    private FirebaseDatabase mDataref;
-+    private DatabaseReference mRootref;
-+
-+    final String userUid =  mAuth.getInstance().getCurrentUser().getUid();
-+
-     FragmentManager fm;
-     FragmentTransaction ft;
- 
-@@ -26,9 +49,74 @@
-         // Inflate the layout for this fragment
-         v=inflater.inflate(R.layout.fragment_user_profile, container, false);
-         editProfile = v.findViewById(R.id.edit_profile_button_my_profile);
-+        profileImage = v.findViewById(R.id.profile_image);
-+        viewUsername = v.findViewById(R.id.view_username);
-+        viewBio = v.findViewById(R.id.view_bio);
-+        numPosts = v.findViewById(R.id.number_posts);
-+        getNumPosts();
-+
-+        mRootref = mDataref.getInstance().getReference();
-+        mRootref.child("Users").child(userUid).addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                User user = snapshot.getValue(User.class);
-+                viewUsername.setText(user.getName());
-+                viewBio.setText(user.getBio());
-+                String url = snapshot.child("image").getValue(String.class);
-+                GlideApp.with(getActivity().getApplicationContext())
-+                        .load(url)
-+                        .circleCrop()
-+                        .placeholder(R.drawable.ic_user_profile_svgrepo_com)
-+                        .into(profileImage);
-+            }
-+
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        });
- 
-         return v;
-     }
-+    private void getNumPosts(){
-+
-+        mRootref = mDataref.getInstance().getReference("postApartment");
-+        mRootref.addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                int i = 0;
-+                for (DataSnapshot dataSnapshot : snapshot.getChildren()) {
-+                    Post post = snapshot.getValue(Post.class);
-+
-+
-+                }
-+            }
-+
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        })
-+//        DatabaseReference reference = FirebaseDatabase.getInstance().getReference("Posts");
-+//        reference.addValueEventListener(new ValueEventListener() {
-+//            @Override
-+//            public void onDataChange(DataSnapshot dataSnapshot) {
-+//                int i = 0;
-+//                for (DataSnapshot snapshot : dataSnapshot.getChildren()){
-+//                    Post post = snapshot.getValue(Post.class);
-+//                    if (post.getPublisher().equals(profileid)){
-+//                        i++;
-+//                    }
-+//                }
-+//                posts.setText(""+i);
-+//            }
-+//
-+//            @Override
-+//            public void onCancelled(DatabaseError databaseError) {
-+
-+            }
-+        });
-+    }
- 
-     @Override
-     public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
-@@ -41,6 +129,7 @@
-         });
-     }
- 
-+
-     private void getFragment (Fragment fragment) {
-         fm = getActivity().getSupportFragmentManager();
-         ft = fm.beginTransaction();
-Index: app/src/main/res/layout/fragment_change_password.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_change_password.xml	(date 1610472503043)
-+++ app/src/main/res/layout/fragment_change_password.xml	(date 1610472503043)
-@@ -0,0 +1,109 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:tools="http://schemas.android.com/tools"
-+    android:layout_width="match_parent"
-+    android:layout_height="match_parent"
-+    tools:context=".ChangePassword"
-+    android:background="@drawable/gradient_yellow_background">
-+
-+    <TextView
-+        android:elevation="5dp"
-+        android:background="@drawable/edit_profile_text_view"
-+        android:paddingLeft="20dp"
-+        android:paddingRight="20dp"
-+        android:paddingTop="10dp"
-+        android:paddingBottom="10dp"
-+        android:textSize="20dp"
-+        android:id="@+id/change_password_text_view"
-+        android:layout_width="wrap_content"
-+        android:layout_height="wrap_content"
-+        android:text="Change Password"
-+        android:layout_alignParentStart="true"
-+        android:layout_marginTop="100dp">
-+
-+    </TextView>
-+
-+    <EditText
-+        android:id="@+id/current_password"
-+        android:layout_width="wrap_content"
-+        android:layout_height="50dp"
-+        android:layout_below="@id/change_password_text_view"
-+        android:layout_centerHorizontal="true"
-+        android:layout_marginStart="10dp"
-+        android:layout_marginTop="100dp"
-+        android:layout_marginEnd="10dp"
-+        android:layout_marginBottom="10dp"
-+        android:alpha="0.8"
-+        android:background="@drawable/textbox_round"
-+        android:drawableEnd="@drawable/ic_icon_ionic_ios_arrow_back"
-+        android:elevation="3dp"
-+        android:padding="10dp"
-+        android:hint="Current password"
-+        android:inputType="textPassword"
-+        android:textSize="15dp"
-+        android:paddingLeft="20dp"
-+        android:paddingRight="20dp"
-+        android:paddingTop="10dp"
-+        android:paddingBottom="10dp"
-+        >
-+
-+    </EditText>
-+
-+    <EditText
-+        android:id="@+id/edit_password"
-+        android:layout_width="wrap_content"
-+        android:layout_height="50dp"
-+        android:layout_below="@id/current_password"
-+        android:layout_centerHorizontal="true"
-+        android:layout_marginStart="10dp"
-+        android:layout_marginTop="10dp"
-+        android:layout_marginEnd="10dp"
-+        android:layout_marginBottom="10dp"
-+        android:background="@drawable/textbox_round"
-+        android:drawableEnd="@drawable/ic_icon_ionic_ios_arrow_back"
-+        android:elevation="3dp"
-+        android:hint="New Password"
-+        android:inputType="textPassword"
-+        android:padding="10dp"
-+        android:paddingLeft="20dp"
-+        android:paddingTop="10dp"
-+        android:paddingRight="20dp"
-+        android:paddingBottom="10dp"
-+        android:textSize="15dp">
-+
-+    </EditText>
-+    <EditText
-+
-+        android:padding="10dp"
-+        android:id="@+id/edit_repeat_password"
-+        android:layout_width="wrap_content"
-+        android:layout_height="50dp"
-+        android:elevation="3dp"
-+        android:background="@drawable/textbox_round"
-+        android:layout_centerHorizontal="true"
-+        android:hint="Repeat Password"
-+        android:inputType="textPassword"
-+        android:layout_below="@+id/edit_password"
-+        android:layout_marginTop="10dp"
-+        android:layout_marginBottom="30dp"
-+        android:drawableEnd="@drawable/ic_icon_ionic_ios_arrow_back"
-+        android:textSize="15dp"
-+        android:paddingLeft="20dp"
-+        android:paddingRight="20dp"
-+        android:paddingTop="10dp"
-+        android:paddingBottom="10dp"
-+        >
-+
-+    </EditText>
-+
-+    <ImageButton
-+        android:id="@+id/password_button"
-+        android:layout_width="wrap_content"
-+        android:layout_height="wrap_content"
-+        android:layout_marginTop="32dp"
-+        android:background="@drawable/circle_white_button"
-+        android:src="@drawable/ic_yellow_arrow_icon"
-+        android:layout_below="@+id/edit_repeat_password"
-+        android:layout_centerInParent="true"/>
-+
-+</RelativeLayout>
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_edit_profile.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.core.widget.NestedScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".EditProfile\"\r\n    android:layout_marginTop=\"60dp\"\r\n    android:layout_marginBottom=\"50dp\"\r\n    android:background=\"@drawable/gradient_yellow_background\">\r\n<RelativeLayout\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n    <TextView\r\n        android:elevation=\"5dp\"\r\n        android:background=\"@drawable/edit_profile_text_view\"\r\n        android:paddingLeft=\"20dp\"\r\n        android:paddingRight=\"20dp\"\r\n        android:paddingTop=\"10dp\"\r\n        android:paddingBottom=\"10dp\"\r\n        android:textSize=\"20dp\"\r\n        android:id=\"@+id/edit_profile_text_view\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Edit profile\"\r\n        android:layout_alignParentStart=\"true\"\r\n        android:layout_marginTop=\"40dp\">\r\n\r\n    </TextView>\r\n    <ImageButton\r\n        android:id=\"@+id/edit_profile_picture\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_toRightOf=\"@+id/edit_profile_image\"\r\n        android:layout_below=\"@id/edit_profile_text_view\"\r\n        android:src=\"@drawable/ic_icon_awesome_edit\"\r\n        android:elevation=\"5dp\"\r\n        android:background=\"@drawable/button_round\"\r\n        android:layout_marginLeft=\"-15dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:padding=\"6dp\"\r\n        />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/edit_profile_image\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:padding=\"10dp\"\r\n        android:layout_marginTop=\"5dp\"\r\n        android:layout_marginBottom=\"5dp\"\r\n        android:background=\"@drawable/circle_white_button\"\r\n        android:layout_below=\"@id/edit_profile_text_view\"\r\n        android:src=\"@drawable/ic_user_profile_svgrepo_com\"/>\r\n\r\n    <Button\r\n        android:id=\"@+id/account_settings_button\"\r\n        android:layout_below=\"@+id/edit_profile_image\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"30dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:text=\"account settings \"\r\n        android:background=\"@drawable/button_round_alabaster\"\r\n       android:paddingLeft=\"5dp\"\r\n        android:paddingRight=\"5dp\"\r\n        android:drawableStart=\"@drawable/ic_icon_ionic_ios_settings\"\r\n        android:drawablePadding=\"5dp\"\r\n        android:textSize=\"9dp\">\r\n\r\n    </Button>\r\n\r\n    <EditText\r\n        android:id=\"@+id/edit_bio\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_below=\"@id/account_settings_button\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginLeft=\"10dp\"\r\n\r\n        android:layout_marginRight=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:alpha=\"0.8\"\r\n        android:background=\"@drawable/textbox_round\"\r\n        android:drawableStart=\"@drawable/ic_icon_feather_info\"\r\n        android:drawableEnd=\"@drawable/ic_icon_ionic_ios_arrow_back\"\r\n        android:drawablePadding=\"8dp\"\r\n        android:elevation=\"3dp\"\r\n\r\n        android:padding=\"10dp\"\r\n        android:text=\"Bio\">\r\n\r\n    </EditText>\r\n\r\n    <EditText\r\n        android:id=\"@+id/edit_username\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_below=\"@id/edit_bio\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:alpha=\"0.8\"\r\n        android:background=\"@drawable/textbox_round\"\r\n        android:drawableEnd=\"@drawable/ic_icon_ionic_ios_arrow_back\"\r\n        android:elevation=\"3dp\"\r\n        android:padding=\"10dp\"\r\n        android:text=\"Username\">\r\n\r\n    </EditText>\r\n    <EditText\r\n        android:padding=\"10dp\"\r\n        android:id=\"@+id/edit_email\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"50dp\"\r\n        android:elevation=\"3dp\"\r\n        android:background=\"@drawable/textbox_round\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:text=\"Email\"\r\n        android:layout_below=\"@id/edit_username\"\r\n        android:layout_margin=\"10dp\"\r\n        android:drawableEnd=\"@drawable/ic_icon_ionic_ios_arrow_back\"\r\n        >\r\n    </EditText>\r\n    <EditText\r\n\r\n        android:padding=\"10dp\"\r\n        android:id=\"@+id/edit_password\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"50dp\"\r\n        android:elevation=\"3dp\"\r\n        android:background=\"@drawable/textbox_round\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:text=\"Password\"\r\n        android:inputType=\"textPassword\"\r\n        android:layout_below=\"@+id/edit_email\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginBottom=\"30dp\"\r\n        android:drawableEnd=\"@drawable/ic_icon_ionic_ios_arrow_back\"\r\n        >\r\n\r\n    </EditText>\r\n\r\n    <Button\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:id=\"@+id/btn_save\"\r\n        android:layout_marginTop=\"15dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:background=\"@drawable/button_round\"\r\n        android:text=\"Save\"\r\n        android:textColor=\"@color/colorAccent\"\r\n        android:layout_below=\"@+id/edit_password\"\r\n        />\r\n</RelativeLayout>\r\n</androidx.core.widget.NestedScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_edit_profile.xml	(revision 2cfe63513da0dc90e980ed1feb4dd8265400dedc)
-+++ app/src/main/res/layout/fragment_edit_profile.xml	(date 1610473923706)
-@@ -7,6 +7,7 @@
-     android:layout_marginTop="60dp"
-     android:layout_marginBottom="50dp"
-     android:background="@drawable/gradient_yellow_background">
-+
- <RelativeLayout
-     android:layout_width="match_parent"
-     android:layout_height="match_parent">
-@@ -124,24 +125,25 @@
-         android:drawableEnd="@drawable/ic_icon_ionic_ios_arrow_back"
-         >
-     </EditText>
--    <EditText
- 
--        android:padding="10dp"
-+    <Button
-         android:id="@+id/edit_password"
-         android:layout_width="wrap_content"
-         android:layout_height="50dp"
--        android:elevation="3dp"
--        android:background="@drawable/textbox_round"
-+        android:layout_below="@id/edit_email"
-         android:layout_centerHorizontal="true"
--        android:text="Password"
--        android:inputType="textPassword"
--        android:layout_below="@+id/edit_email"
-+        android:layout_marginStart="10dp"
-         android:layout_marginTop="10dp"
--        android:layout_marginBottom="30dp"
-+        android:layout_marginEnd="10dp"
-+        android:layout_marginBottom="10dp"
-+        android:alpha="0.8"
-+        android:background="@drawable/textbox_round"
-         android:drawableEnd="@drawable/ic_icon_ionic_ios_arrow_back"
--        >
-+        android:elevation="3dp"
-+        android:padding="10dp"
-+        android:text="Change Password">
- 
--    </EditText>
-+    </Button>
- 
-     <Button
-         android:layout_width="wrap_content"
-Index: app/build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>apply plugin: 'com.android.application'\r\napply plugin: 'com.google.gms.google-services'\r\n\r\nandroid {\r\n    compileSdkVersion 29\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.shroomies\"\r\n        minSdkVersion 26\r\n        targetSdkVersion 29\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n        Properties properties = new Properties()\r\n        if (rootProject.file(\"local.properties\").exists()) {\r\n            properties.load(rootProject.file(\"local.properties\").newDataInputStream())\r\n        }\r\n        manifestPlaceholders = [ mapsApiKey : properties.getProperty(\"MAPS_API_KEY\", \"\") ]\r\n\r\n    }\r\n\r\n\r\n        buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation 'com.google.firebase:firebase-database:19.5.1'\r\n    implementation 'androidx.wear:wear:1.0.0'\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    implementation 'com.google.firebase:firebase-storage:19.2.0'\r\n    compileOnly 'com.google.android.wearable:wearable:2.6.0'\r\n    def nav_version = '2.3.1'\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\r\n    testImplementation 'junit:junit:4.13.1'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation \"androidx.cardview:cardview:1.0.0\"\r\n    implementation \"androidx.recyclerview:recyclerview:1.1.0\"\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation \"androidx.navigation:navigation-fragment:2.3.1\"\r\n    implementation \"androidx.navigation:navigation-ui:$nav_version\"\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation \"androidx.cardview:cardview:1.0.0\"\r\n    implementation \"androidx.recyclerview:recyclerview:1.1.0\"\r\n    implementation 'com.cepheuen.elegant-number-button:lib:1.0.3'\r\n    implementation 'com.aurelhubert:ahbottomnavigation:2.3.4'\r\n    implementation 'androidx.biometric:biometric:1.0.1'\r\n    implementation  'com.google.firebase:firebase-auth:20.0.1'\r\n    implementation 'com.google.android.gms:play-services-auth:15.0.1'\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'\r\n    implementation 'com.google.maps.android:android-maps-utils:2.2.0'\r\n    implementation \"com.airbnb.android:lottie:3.5.0\"\r\n    implementation \"com.google.android.gms:play-services-location:17.1.0\"\r\n    implementation \"com.google.android.gms:play-services-location:15.0.1\"\r\n\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation 'jp.wasabeef:picasso-transformations:2.0.0'\r\n    implementation 'com.github.tizisdeepan:dots:1.0.1'\r\n    api 'com.theartofdev.edmodo:android-image-cropper:2.8.+'\r\n    implementation 'de.hdodenhof:circleimageview:3.1.0'\r\n    implementation 'com.github.jd-alexander:LikeButton:0.2.3'\r\n    implementation 'com.firebaseui:firebase-ui-storage:6.4.0'\r\n\r\n\r\n\r\n\r\n}\r\napply plugin: 'com.google.gms.google-services'
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/build.gradle	(revision 2cfe63513da0dc90e980ed1feb4dd8265400dedc)
-+++ app/build.gradle	(date 1609159018213)
-@@ -28,50 +28,50 @@
-         }
-     }
- }
--
--dependencies {
--    implementation 'com.google.firebase:firebase-database:19.5.1'
--    implementation 'androidx.wear:wear:1.0.0'
--    implementation 'com.google.android.gms:play-services-maps:17.0.0'
--    implementation 'com.google.firebase:firebase-storage:19.2.0'
--    compileOnly 'com.google.android.wearable:wearable:2.6.0'
--    def nav_version = '2.3.1'
--    implementation fileTree(dir: "libs", include: ["*.jar"])
--    implementation 'androidx.appcompat:appcompat:1.2.0'
--    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'
--    testImplementation 'junit:junit:4.13.1'
--    androidTestImplementation 'androidx.test.ext:junit:1.1.2'
--    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
--    implementation "androidx.cardview:cardview:1.0.0"
--    implementation "androidx.recyclerview:recyclerview:1.1.0"
--    implementation 'androidx.legacy:legacy-support-v4:1.0.0'
--    implementation "androidx.navigation:navigation-fragment:2.3.1"
--    implementation "androidx.navigation:navigation-ui:$nav_version"
--    implementation 'com.squareup.picasso:picasso:2.71828'
--    implementation "androidx.cardview:cardview:1.0.0"
--    implementation "androidx.recyclerview:recyclerview:1.1.0"
--    implementation 'com.cepheuen.elegant-number-button:lib:1.0.3'
--    implementation 'com.aurelhubert:ahbottomnavigation:2.3.4'
--    implementation 'androidx.biometric:biometric:1.0.1'
--    implementation  'com.google.firebase:firebase-auth:20.0.1'
--    implementation 'com.google.android.gms:play-services-auth:15.0.1'
--    implementation 'com.github.bumptech.glide:glide:4.11.0'
--    annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'
--    implementation 'com.google.maps.android:android-maps-utils:2.2.0'
--    implementation "com.airbnb.android:lottie:3.5.0"
--    implementation "com.google.android.gms:play-services-location:17.1.0"
--    implementation "com.google.android.gms:play-services-location:15.0.1"
-+    dependencies {
-+        implementation 'com.google.firebase:firebase-database:19.5.1'
-+        implementation 'androidx.wear:wear:1.0.0'
-+        implementation 'com.google.android.gms:play-services-maps:17.0.0'
-+        implementation 'com.google.firebase:firebase-storage:19.2.0'
-+        compileOnly 'com.google.android.wearable:wearable:2.6.0'
-+        def nav_version = '2.3.1'
-+        implementation fileTree(dir: "libs", include: ["*.jar"])
-+        implementation 'androidx.appcompat:appcompat:1.2.0'
-+        implementation 'androidx.constraintlayout:constraintlayout:2.0.4'
-+        testImplementation 'junit:junit:4.13.1'
-+        androidTestImplementation 'androidx.test.ext:junit:1.1.2'
-+        androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
-+        implementation "androidx.cardview:cardview:1.0.0"
-+        implementation "androidx.recyclerview:recyclerview:1.1.0"
-+        implementation 'androidx.legacy:legacy-support-v4:1.0.0'
-+        implementation "androidx.navigation:navigation-fragment:2.3.1"
-+        implementation "androidx.navigation:navigation-ui:$nav_version"
-+        implementation 'com.squareup.picasso:picasso:2.71828'
-+        implementation "androidx.cardview:cardview:1.0.0"
-+        implementation "androidx.recyclerview:recyclerview:1.1.0"
-+        implementation 'com.cepheuen.elegant-number-button:lib:1.0.3'
-+        implementation 'com.aurelhubert:ahbottomnavigation:2.3.4'
-+        implementation 'androidx.biometric:biometric:1.0.1'
-+        implementation  'com.google.firebase:firebase-auth:20.0.1'
-+        implementation 'com.google.android.gms:play-services-auth:15.0.1'
-+        implementation 'com.github.bumptech.glide:glide:4.11.0'
-+        annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'
-+        implementation 'com.google.maps.android:android-maps-utils:2.2.0'
-+        implementation "com.airbnb.android:lottie:3.5.0"
-+        implementation "com.google.android.gms:play-services-location:17.1.0"
-+        implementation "com.google.android.gms:play-services-location:15.0.1"
- 
--    implementation 'com.squareup.picasso:picasso:2.71828'
--    implementation 'jp.wasabeef:picasso-transformations:2.0.0'
--    implementation 'com.github.tizisdeepan:dots:1.0.1'
--    api 'com.theartofdev.edmodo:android-image-cropper:2.8.+'
--    implementation 'de.hdodenhof:circleimageview:3.1.0'
--    implementation 'com.github.jd-alexander:LikeButton:0.2.3'
--    implementation 'com.firebaseui:firebase-ui-storage:6.4.0'
-+        implementation 'com.squareup.picasso:picasso:2.71828'
-+        implementation 'jp.wasabeef:picasso-transformations:2.0.0'
-+        implementation 'com.github.tizisdeepan:dots:1.0.1'
-+        api 'com.theartofdev.edmodo:android-image-cropper:2.8.+'
-+        implementation 'de.hdodenhof:circleimageview:3.1.0'
-+        implementation 'com.github.jd-alexander:LikeButton:0.2.3'
-+        implementation 'com.firebaseui:firebase-ui-storage:6.4.0'
- 
- 
- 
- 
--}
-+
-+    }
- apply plugin: 'com.google.gms.google-services'
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_publish_post.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:paddingTop=\"60dp\"\r\n\r\n    android:paddingBottom=\"60dp\"\r\n    tools:context=\".PublishPost\">\r\n\r\n\r\n    <androidx.core.widget.NestedScrollView\r\n        android:id=\"@+id/nested\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n\r\n        android:fillViewport=\"true\"\r\n        >\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <com.google.android.material.tabs.TabLayout\r\n\r\n                android:id=\"@+id/tab_layout_publish_post\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                app:tabBackground=\"@drawable/tab_backgorund_style\"\r\n                >\r\n\r\n                <com.google.android.material.tabs.TabItem\r\n                    android:id=\"@+id/tab_button_apartment\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"apartment\"\r\n                    />\r\n\r\n\r\n                <com.google.android.material.tabs.TabItem\r\n                    android:id=\"@+id/tab_button_personal\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"personal\"\r\n                    />\r\n\r\n\r\n            </com.google.android.material.tabs.TabLayout>\r\n\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/upload_image_card\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n\r\n                android:background=\"@drawable/post_card_rectangle_round\"\r\n                android:elevation=\"3dp\">\r\n\r\n                <androidx.appcompat.widget.AppCompatTextView\r\n                    android:id=\"@+id/upload_image_text_view\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"top\"\r\n                    android:layout_margin=\"20dp\"\r\n                    android:text=\"upload images\"\r\n                    android:textSize=\"18sp\">\r\n\r\n                </androidx.appcompat.widget.AppCompatTextView>\r\n\r\n                <ImageButton\r\n                    android:elevation=\"5dp\"\r\n                    android:padding=\"15dp\"\r\n                    android:clickable=\"true\"\r\n                    android:id=\"@+id/cloud_icon_publish_post\"\r\n                    android:background=\"@drawable/button_circle_timberwolf_small\"\r\n                    android:src=\"@drawable/ic_upload_icon_cloud\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_alignParentRight=\"true\"\r\n                    android:layout_margin=\"20dp\"\r\n                    android:layout_above=\"@+id/view_pager_apartment_view\"\r\n                    />\r\n\r\n\r\n\r\n                <TextView\r\n                    android:id=\"@+id/number_of_photos\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_below=\"@+id/upload_image_text_view\"\r\n                    android:layout_marginRight=\"10dp\"\r\n                    android:layout_marginLeft=\"3dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:layout_toRightOf=\"@id/image_icon_post\" />\r\n\r\n                <ImageView\r\n\r\n                    android:id=\"@+id/image_icon_post\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_alignParentLeft=\"true\"\r\n                    android:layout_below=\"@+id/upload_image_text_view\"\r\n                    android:layout_marginLeft=\"30dp\"\r\n                    android:layout_marginBottom=\"10dp\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:elevation=\"3dp\"\r\n                    android:src=\"@drawable/ic_icon_awesome_image\"\r\n                    android:visibility=\"gone\"\r\n\r\n                    >\r\n                </ImageView>\r\n\r\n                <ImageButton\r\n                    android:visibility=\"gone\"\r\n                    android:id=\"@+id/delete_image_post\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:src=\"@drawable/ic_icon_material_remove_circle_outline\"\r\n\r\n                    android:layout_below=\"@id/view_pager\"\r\n                    android:layout_marginTop=\"-60dp\"\r\n                    android:layout_marginLeft=\"40dp\"\r\n                    android:layout_alignParentLeft=\"true\"\r\n                    android:background=\"@drawable/small_circle_button\"\r\n                    android:elevation=\"5dp\"\r\n                    android:padding=\"5dp\"\r\n\r\n                    />\r\n\r\n                <androidx.viewpager.widget.ViewPager\r\n\r\n                    android:layout_below=\"@id/image_icon_post\"\r\n                    android:id=\"@+id/view_pager\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"200dp\"\r\n                    android:layout_marginRight=\"20dp\"\r\n                    android:layout_marginLeft=\"20dp\"\r\n                    android:layout_marginBottom=\"20dp\"\r\n                    android:layout_marginTop=\"20dp\"\r\n                    android:visibility=\"gone\">\r\n\r\n\r\n                </androidx.viewpager.widget.ViewPager>\r\n                <com.make.dots.dotsindicator.DotsIndicator\r\n                    android:visibility=\"gone\"\r\n                    android:layout_below=\"@id/view_pager\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:id=\"@+id/dotsIndicator\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"-60dp\"\r\n                    android:background=\"@drawable/dots_background\"\r\n                    android:padding=\"4dp\"\r\n                    app:dot_drawable=\"@drawable/ic_dot_darkgrey\"\r\n                    app:dot_drawable_unselected=\"@drawable/ic_dot_lightgrey\"\r\n                    app:dot_height=\"6dp\"\r\n                    app:dot_margin=\"4dp\"\r\n                    app:dot_width=\"6dp\" />\r\n\r\n\r\n            </RelativeLayout>\r\n\r\n\r\n\r\n\r\n\r\n\r\n            <EditText\r\n                android:id=\"@+id/description_edit_text\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:background=\"@drawable/post_card_rectangle_round\"\r\n                android:elevation=\"5dp\"\r\n                android:hint=\"Description\"\r\n                android:minHeight=\"80dp\"\r\n                android:padding=\"20dp\">\r\n\r\n\r\n            </EditText>\r\n\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"horizontal\">\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/number_of_roommates_relative_layout\"\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"130dp\"\r\n                    android:layout_margin=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n\r\n                    android:background=\"@drawable/post_card_rectangle_round\"\r\n                    android:elevation=\"3dp\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/number_of_roommates_tv\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_alignParentStart=\"true\"\r\n                        android:layout_marginLeft=\"20dp\"\r\n                        android:layout_marginTop=\"20dp\"\r\n                        android:layout_marginBottom=\"10dp\"\r\n\r\n                        android:text=\"No.roommates:\">\r\n\r\n                    </TextView>\r\n\r\n                    <NumberPicker\r\n                        android:id=\"@+id/roommate_number_picker\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@id/number_of_roommates_tv\"\r\n                        android:layout_centerInParent=\"true\"\r\n                        android:layout_marginBottom=\"10dp\">\r\n\r\n                    </NumberPicker>\r\n\r\n                </RelativeLayout>\r\n\r\n                <RelativeLayout\r\n                    android:id=\"@+id/budget_layout\"\r\n\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"130dp\"\r\n                    android:layout_margin=\"10dp\"\r\n                    android:layout_weight=\"1\"\r\n\r\n\r\n                    android:background=\"@drawable/post_card_rectangle_round\"\r\n                    android:elevation=\"3dp\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/budget_tv\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_alignParentStart=\"true\"\r\n                        android:layout_marginLeft=\"20dp\"\r\n                        android:layout_marginTop=\"20dp\"\r\n                        android:layout_marginBottom=\"10dp\"\r\n\r\n                        android:text=\"Price:\">\r\n\r\n                    </TextView>\r\n\r\n                    <NumberPicker\r\n                        android:id=\"@+id/budget_number_picker\"\r\n                        android:layout_width=\"66dp\"\r\n                        android:layout_height=\"73dp\"\r\n                        android:layout_below=\"@id/budget_tv\"\r\n                        android:layout_centerInParent=\"true\"\r\n                        android:layout_marginBottom=\"10dp\"\r\n                        android:selectionDividerHeight=\"0dp\"\r\n                        >\r\n\r\n                    </NumberPicker>\r\n\r\n                </RelativeLayout>\r\n            </LinearLayout>\r\n\r\n\r\n            <TextView\r\n\r\n                android:id=\"@+id/location_search_view\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginTop=\"20dp\"\r\n                android:layout_marginRight=\"20dp\"\r\n                android:background=\"@drawable/location_search_bar\"\r\n                android:drawablePadding=\"5dp\"\r\n                android:elevation=\"5dp\"\r\n\r\n                android:gravity=\"fill_vertical\"\r\n                android:minHeight=\"90dp\"\r\n                android:padding=\"15dp\"\r\n                android:drawableEnd=\"@drawable/ic_icon_feather_map\">\r\n\r\n            </TextView>\r\n\r\n\r\n            <com.example.shroomies.CustomMapView\r\n                android:id=\"@+id/address_map_view\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"250dp\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginRight=\"20dp\"\r\n                android:layout_marginBottom=\"20dp\"\r\n                android:elevation=\"10dp\">\r\n\r\n\r\n            </com.example.shroomies.CustomMapView>\r\n\r\n\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginRight=\"20dp\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginTop=\"15dp\"\r\n                android:layout_marginBottom=\"120dp\"\r\n                android:background=\"@drawable/post_card_rectangle_round\"\r\n                android:elevation=\"3dp\"\r\n                >\r\n\r\n                <TextView\r\n                    android:id=\"@+id/add_property\"\r\n                    android:layout_alignParentStart=\"true\"\r\n                    android:layout_width=\"wrap_content\"\r\n\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"20dp\"\r\n                    android:layout_marginTop=\"20dp\"\r\n                    android:layout_marginEnd=\"20dp\"\r\n                    android:text=\"Add properties\" />\r\n\r\n                <LinearLayout\r\n                    android:id=\"@+id/property_Radio_group\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:padding=\"10dp\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:layout_below=\"@id/add_property\"\r\n                    >\r\n\r\n\r\n                    <androidx.appcompat.widget.AppCompatCheckBox\r\n                        android:id=\"@+id/male_image_button_publish_post\"\r\n                        android:drawableStart=\"@drawable/ic_icon_ionic_ios_male\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_gravity=\"center_horizontal\"\r\n                        android:layout_margin=\"5dp\"\r\n                        android:button=\"@android:color/transparent\"\r\n                        android:background=\"@drawable/property_radio_selector\"\r\n                        android:elevation=\"3dp\"\r\n                        android:padding=\"10dp\"\r\n                        />\r\n\r\n                    <Space\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_weight=\"1\" />\r\n\r\n                    <androidx.appcompat.widget.AppCompatCheckBox\r\n                        android:id=\"@+id/female_image_button_post\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_gravity=\"center_horizontal\"\r\n                        android:layout_margin=\"5dp\"\r\n\r\n                        android:elevation=\"3dp\"\r\n                        android:padding=\"10dp\"\r\n                        android:drawableStart=\"@drawable/ic_icon_ionic_ios_female\"\r\n                        android:button=\"@android:color/transparent\"\r\n                        android:background=\"@drawable/property_radio_selector\"/>\r\n                    <Space\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_weight=\"1\" />\r\n\r\n                    <androidx.appcompat.widget.AppCompatCheckBox\r\n                        android:id=\"@+id/pets_allowd_image_button_post\"\r\n\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@id/add_property\"\r\n                        android:layout_gravity=\"center_horizontal\"\r\n                        android:layout_margin=\"5dp\"\r\n\r\n                        android:elevation=\"3dp\"\r\n                        android:padding=\"10dp\"\r\n                        android:drawableStart=\"@drawable/ic_icon_map_pet_store\"\r\n                        android:button=\"@android:color/transparent\"\r\n                        android:background=\"@drawable/property_radio_selector\"/>\r\n                    <Space\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_weight=\"1\" />\r\n\r\n                    <androidx.appcompat.widget.AppCompatCheckBox\r\n                        android:id=\"@+id/non_smoking_image_button_post\"\r\n\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@id/add_property\"\r\n                        android:layout_gravity=\"center_horizontal\"\r\n                        android:layout_margin=\"5dp\"\r\n\r\n                        android:elevation=\"3dp\"\r\n                        android:padding=\"10dp\"\r\n                        android:drawableStart=\"@drawable/ic_icon_material_smoke_free\"\r\n                        android:button=\"@android:color/transparent\"\r\n                        android:background=\"@drawable/property_radio_selector\"/>\r\n\r\n                </LinearLayout>\r\n\r\n            </RelativeLayout>\r\n\r\n\r\n\r\n        </LinearLayout>\r\n\r\n    </androidx.core.widget.NestedScrollView>\r\n\r\n    <Button\r\n        android:layout_alignParentBottom=\"true\"\r\n        android:id=\"@+id/publish_post_button\"\r\n        android:text=\"publish post\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginLeft=\"50dp\"\r\n        android:layout_marginRight=\"50dp\"\r\n\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:background=\"@drawable/publish_post_button\"\r\n        android:clickable=\"true\"\r\n        android:elevation=\"3dp\"\r\n        android:gravity=\"center\"\r\n        android:paddingLeft=\"30dp\"\r\n        android:textSize=\"14dp\"\r\n        android:paddingTop=\"10dp\"\r\n        android:paddingBottom=\"10dp\"\r\n        android:paddingRight=\"30dp\"\r\n        android:textColor=\"@color/white\"\r\n        android:drawableStart=\"@drawable/ic_icon_material_publish\"\r\n        />\r\n\r\n    <com.airbnb.lottie.LottieAnimationView\r\n        android:visibility=\"invisible\"\r\n        android:id=\"@+id/lottie_uploading_post\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:layout_margin=\"50dp\"\r\n        app:lottie_rawRes=\"@raw/lf30_editor_igyp9bvy\"\r\n        app:lottie_autoPlay=\"true\"\r\n        app:lottie_loop=\"true\">\r\n    </com.airbnb.lottie.LottieAnimationView>\r\n\r\n    <RelativeLayout\r\n        android:visibility=\"gone\"\r\n        android:id=\"@+id/success_card\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n\r\n        android:layout_marginRight=\"20dp\"\r\n        android:layout_marginLeft=\"20dp\"\r\n        android:layout_marginTop=\"100dp\"\r\n        android:layout_marginBottom=\"200dp\"\r\n\r\n        android:background=\"@drawable/post_card_rectangle_round\"\r\n        android:elevation=\"20dp\"\r\n\r\n        >\r\n        <ImageView\r\n            android:id=\"@+id/check_Image\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_margin=\"20dp\"\r\n            android:layout_width=\"wrap_content\"\r\n\r\n            android:layout_height=\"wrap_content\"\r\n            android:src=\"@drawable/ic_icon_awesome_check_circle\">\r\n\r\n        </ImageView>\r\n        <TextView\r\n            android:gravity=\"center\"\r\n            android:layout_centerInParent=\"true\"\r\n            android:layout_margin=\"20dp\"\r\n            android:textSize=\"20dp\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/check_Image\"\r\n            android:text=\"your post has been successfully uploaded!\"\r\n            />\r\n\r\n        <Button\r\n            android:id=\"@+id/ok_Button\"\r\n            android:elevation=\"5dp\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:minHeight=\"50dp\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"20dp\"\r\n            android:text=\"OK\"\r\n            android:layout_alignParentBottom=\"true\"\r\n            android:background=\"@drawable/ok_button\"\r\n            ></Button>\r\n\r\n    </RelativeLayout>\r\n\r\n\r\n\r\n</RelativeLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_publish_post.xml	(revision 2cfe63513da0dc90e980ed1feb4dd8265400dedc)
-+++ app/src/main/res/layout/fragment_publish_post.xml	(date 1609168126742)
-@@ -145,6 +145,7 @@
- 
- 
-                 </androidx.viewpager.widget.ViewPager>
-+
-                 <com.make.dots.dotsindicator.DotsIndicator
-                     android:visibility="gone"
-                     android:layout_below="@id/view_pager"
-@@ -165,10 +166,6 @@
-             </RelativeLayout>
- 
- 
--
--
--
--
-             <EditText
-                 android:id="@+id/description_edit_text"
-                 android:layout_width="match_parent"
-Index: app/src/main/java/com/example/shroomies/ChangeUsername.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/shroomies/ChangeUsername.java	(date 1610471901582)
-+++ app/src/main/java/com/example/shroomies/ChangeUsername.java	(date 1610471901582)
-@@ -0,0 +1,97 @@
-+package com.example.shroomies;
-+
-+import android.os.Bundle;
-+
-+import androidx.annotation.NonNull;
-+import androidx.cardview.widget.CardView;
-+import androidx.fragment.app.Fragment;
-+
-+import android.view.LayoutInflater;
-+import android.view.View;
-+import android.view.ViewGroup;
-+import android.widget.Button;
-+import android.widget.EditText;
-+import android.widget.TextView;
-+import android.widget.Toast;
-+
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.OnFailureListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.auth.FirebaseUser;
-+import com.google.firebase.database.DataSnapshot;
-+import com.google.firebase.database.DatabaseError;
-+import com.google.firebase.database.DatabaseReference;
-+import com.google.firebase.database.FirebaseDatabase;
-+import com.google.firebase.database.ValueEventListener;
-+
-+import java.util.HashMap;
-+
-+public class ChangeUsername extends Fragment {
-+    private FirebaseUser mUser;
-+    private FirebaseDatabase mDataref;
-+    private FirebaseAuth mAuth;
-+    private DatabaseReference mRootref;
-+    final String userUid =  mAuth.getInstance().getCurrentUser().getUid();
-+
-+    private EditText username;
-+    private TextView currentUsername;
-+    private Button saveUsername;
-+    CardView cardUsername;
-+
-+    View v;
-+    @Override
-+    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-+                             Bundle savedInstanceState) {
-+        // Inflate the layout for this fragment
-+        v=inflater.inflate(R.layout.fragment_change_username, container, false);
-+
-+        username = v.findViewById(R.id.new_username);
-+        currentUsername = v.findViewById(R.id.textview_cur_username);
-+        saveUsername = v.findViewById(R.id.change_username);
-+        cardUsername = v.findViewById(R.id.username_card);
-+
-+        mRootref = mDataref.getInstance().getReference();
-+        mRootref.child("Users").child(userUid).addValueEventListener(new ValueEventListener() {
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                    User user = snapshot.getValue(User.class);
-+                    currentUsername.setText(user.getName());
-+                }
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
-+
-+            }
-+        });
-+
-+        saveUsername.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                updateUsername();
-+            }
-+        });
-+        return v;
-+    }
-+
-+    private void updateUsername() {
-+        String txtName = username.getText().toString();
-+
-+        HashMap<String, Object> updateDetails = new HashMap<>();
-+        updateDetails.put("name", txtName);
-+
-+        mDataref.getInstance().getReference().child("Users").child(userUid).updateChildren(updateDetails).addOnCompleteListener(new OnCompleteListener<Void>() {
-+
-+            @Override
-+            public void onComplete(@NonNull Task<Void> task) {
-+                if (task.isSuccessful()) {
-+                    Toast.makeText(getActivity(), "Updated username successfully", Toast.LENGTH_SHORT).show();
-+                }
-+            }
-+        }).addOnFailureListener(new OnFailureListener() {
-+            @Override
-+            public void onFailure(@NonNull Exception e) {
-+                Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();
-+            }
-+        });
-+    }
-+}
-\ No newline at end of file
-Index: .idea/inspectionProfiles/Project_Default.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- .idea/inspectionProfiles/Project_Default.xml	(revision 2cfe63513da0dc90e980ed1feb4dd8265400dedc)
-+++ .idea/inspectionProfiles/Project_Default.xml	(date 1610525180841)
-@@ -1,0 +1,11 @@
-+<component name="InspectionProjectProfileManager">
-+  <profile version="1.0">
-+    <option name="myName" value="Project Default" />
-+    <inspection_tool class="CheckTagEmptyBody" enabled="false" level="WARNING" enabled_by_default="false" />
-+    <inspection_tool class="ConstantConditions" enabled="true" level="WARNING" enabled_by_default="true">
-+      <option name="SUGGEST_NULLABLE_ANNOTATIONS" value="false" />
-+      <option name="DONT_REPORT_TRUE_ASSERT_STATEMENTS" value="false" />
-+    </inspection_tool>
-+    <inspection_tool class="UNCHECKED_WARNING" enabled="false" level="WARNING" enabled_by_default="false" />
-+  </profile>
-+</component>
-\ No newline at end of file
-Index: app/src/main/java/com/example/shroomies/EditProfile.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.shroomies;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.ContentResolver;\r\nimport android.content.Intent;\r\nimport android.content.res.Resources;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.webkit.MimeTypeMap;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.Toast;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.google.android.gms.tasks.Continuation;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.UserInfo;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.StorageTask;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport java.util.HashMap;\r\n//import com.squareup.picasso.Picasso;\r\n//import com.theartofdev.edmodo.cropper.CropImage;\r\n//import com.theartofdev.edmodo.cropper.CropImageView;\r\n//\r\n//import java.util.HashMap;\r\n//\r\n//import de.hdodenhof.circleimageview.CircleImageView;\r\n\r\n\r\npublic class EditProfile extends Fragment {\r\n\r\n    View v;\r\n//    private CircleImageView profileImage;\r\n    private ImageButton editImage;\r\n    private EditText username;\r\n    private EditText email;\r\n    private EditText bio;\r\n    private EditText pw;\r\n    private Button save;\r\n\r\n    private FirebaseUser mUser;\r\n    private FirebaseDatabase mDataref;\r\n    private FirebaseAuth mAuth;\r\n    private DatabaseReference mRootref;\r\n    private Uri imageUri;\r\n    private StorageTask uploadTask;\r\n    private StorageReference storageRef;\r\n\r\n    final String userUid =  mAuth.getInstance().getCurrentUser().getUid();\r\n\r\n    private static final int IMAGE_REQUEST= 1;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_edit_profile, container, false);\r\n        MainActivity.btm_view.setBackgroundColor(getResources().getColor(R.color.lowerGradientColorForLoginBackground, getActivity().getTheme()));\r\n\r\n//        profileImage = v.findViewById(R.id.edit_profile_image);\r\n        editImage = v.findViewById(R.id.edit_profile_picture);\r\n        username = v.findViewById(R.id.edit_username);\r\n        email = v.findViewById(R.id.edit_email);\r\n        pw = v.findViewById(R.id.edit_password);\r\n        bio = v.findViewById(R.id.edit_bio);\r\n        save = v.findViewById(R.id.btn_save);\r\n\r\n\r\n        mRootref = mDataref.getInstance().getReference();\r\n        //DatabaseReference firebaseDatabase = FirebaseDatabase.getInstance().getReference();\r\n        final String userUid =  mAuth.getInstance().getCurrentUser().getUid();\r\n        //mRootref = mDataref.getReference().child(\"Users\").child(userUid);\r\n        //mRootref.addValueEventListener(new ValueEventListener() {\r\n        mRootref.child(\"Users\").child(userUid).addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    User user = snapshot.getValue(User.class);\r\n                    username.setText(user.getName());\r\n                    bio.setText(user.getBio());\r\n                    email.setText(user.getEmail());\r\n//                    Glide.with(getActivity()).load(user.getImageurl()).into(profileImage);\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n\r\n//            profileImage.setOnClickListener(new View.OnClickListener() {\r\n//                @Override\r\n//                public void onClick(View v) {\r\n//                    openImage();\r\n//                }\r\n//            });\r\n\r\n            editImage.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    openImage();\r\n                }\r\n            });\r\n\r\n            save.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    updateProfile();\r\n                }\r\n            });\r\n            return v;\r\n        }\r\n\r\n\r\n    private void updateProfile() {\r\n        String txtName = username.getText().toString();\r\n        String txtEmail = email.getText().toString();\r\n        String txtBio = bio.getText().toString();\r\n\r\n        HashMap<String, Object> updateDetails = new HashMap<>();\r\n        updateDetails.put(\"name\", txtName);\r\n        updateDetails.put(\"email\", txtEmail);\r\n        updateDetails.put(\"bio\", txtBio);\r\n        mDataref.getInstance().getReference().child(\"Users\").child(userUid).updateChildren(updateDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                if (task.isSuccessful()) {\r\n                    Toast.makeText(getActivity(), \"Updated successfully\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void openImage() {\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        startActivityForResult(intent, IMAGE_REQUEST);\r\n    }\r\n\r\n    private String getFileExtension(Uri uri){\r\n        ContentResolver contentResolver = getContext().getContentResolver();\r\n        MimeTypeMap mimeTypeMap = MimeTypeMap.getSingleton();\r\n        return mimeTypeMap.getExtensionFromMimeType(contentResolver.getType(uri));\r\n    }\r\n\r\n\r\n\r\n    private void uploadImage(){\r\n        final ProgressDialog pd = new ProgressDialog(getActivity());\r\n        pd.setMessage(\"Uploading\");\r\n        pd.show();\r\n\r\n\r\n        if (imageUri !=null){\r\n            storageRef = FirebaseStorage.getInstance().getReference();\r\n            final StorageReference fileRef = storageRef.child(\"profile pictures\").child(System.currentTimeMillis() + \".\" + getFileExtension(imageUri));\r\n            uploadTask = fileRef.putFile(imageUri);\r\n            uploadTask.continueWithTask(new Continuation<UploadTask.TaskSnapshot, Task <Uri>>() {\r\n                @Override\r\n                public Task <Uri> then(@NonNull Task <UploadTask.TaskSnapshot> task) throws Exception {\r\n                    if(!task.isSuccessful()){\r\n                        throw task.getException();\r\n                    }\r\n\r\n                    return fileRef.getDownloadUrl();\r\n                }\r\n            }).addOnCompleteListener(new OnCompleteListener<Uri>() {\r\n                @Override\r\n                public void onComplete(@NonNull Task<Uri> task) {\r\n                    if (task.isSuccessful()){\r\n                        Uri downloadUri = task.getResult();\r\n                        String mUrl = downloadUri.toString();\r\n                        HashMap <String, Object> imageDetails = new HashMap<>();\r\n                        imageDetails.put(\"image\", mUrl);\r\n                        mDataref.getInstance().getReference().child(\"Users\").child(userUid).updateChildren(imageDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                if (task.isSuccessful()) {\r\n                                    Toast.makeText(getActivity(), \"Uploaded successfully\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                        });\r\n                        pd.dismiss();\r\n                    }\r\n                    else{\r\n                        Toast.makeText(getActivity(), \"Upload failed\",Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    Toast.makeText(getActivity(),e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            Toast.makeText(getActivity(), \"No image selected\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == IMAGE_REQUEST && resultCode == getActivity().RESULT_OK && data !=null) {\r\n//            CropImage.ActivityResult result = CropImage.getActivityResult(data);\r\n            imageUri = data.getData();\r\n\r\n            if (uploadTask !=null && uploadTask.isInProgress()){\r\n                Toast.makeText(getContext(), \"Upload is in progress\", Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                uploadImage();\r\n            }\r\n        } else {\r\n            Toast.makeText(getActivity(), \"Something went wrong!\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/shroomies/EditProfile.java	(revision 2cfe63513da0dc90e980ed1feb4dd8265400dedc)
-+++ app/src/main/java/com/example/shroomies/EditProfile.java	(date 1610476552826)
-@@ -3,14 +3,16 @@
- import android.app.ProgressDialog;
- import android.content.ContentResolver;
- import android.content.Intent;
--import android.content.res.Resources;
- import android.net.Uri;
- import android.os.Bundle;
- 
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
- import androidx.fragment.app.Fragment;
-+import androidx.fragment.app.FragmentManager;
-+import androidx.fragment.app.FragmentTransaction;
- 
-+import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-@@ -18,6 +20,7 @@
- import android.widget.Button;
- import android.widget.EditText;
- import android.widget.ImageButton;
-+import android.widget.ImageView;
- import android.widget.Toast;
- 
- import com.bumptech.glide.Glide;
-@@ -25,6 +28,8 @@
- import com.google.android.gms.tasks.OnCompleteListener;
- import com.google.android.gms.tasks.OnFailureListener;
- import com.google.android.gms.tasks.Task;
-+import com.google.firebase.auth.AuthCredential;
-+import com.google.firebase.auth.EmailAuthProvider;
- import com.google.firebase.auth.FirebaseAuth;
- import com.google.firebase.auth.FirebaseUser;
- import com.google.firebase.auth.UserInfo;
-@@ -37,27 +42,28 @@
- import com.google.firebase.storage.StorageReference;
- import com.google.firebase.storage.StorageTask;
- import com.google.firebase.storage.UploadTask;
-+import com.theartofdev.edmodo.cropper.CropImage;
-+import com.theartofdev.edmodo.cropper.CropImageView;
-+
- import java.util.HashMap;
--//import com.squareup.picasso.Picasso;
--//import com.theartofdev.edmodo.cropper.CropImage;
--//import com.theartofdev.edmodo.cropper.CropImageView;
--//
--//import java.util.HashMap;
--//
--//import de.hdodenhof.circleimageview.CircleImageView;
-+
-+
- 
- 
- public class EditProfile extends Fragment {
- 
-+    FragmentManager fm;
-+    FragmentTransaction ft;
-+
-     View v;
--//    private CircleImageView profileImage;
-+    private ImageView profileImage;
-     private ImageButton editImage;
--    private EditText username;
-+
-     private EditText email;
-     private EditText bio;
--    private EditText pw;
-+    private Button pw;
-     private Button save;
--
-+    private EditText username;
-     private FirebaseUser mUser;
-     private FirebaseDatabase mDataref;
-     private FirebaseAuth mAuth;
-@@ -77,7 +83,7 @@
-         View v = inflater.inflate(R.layout.fragment_edit_profile, container, false);
-         MainActivity.btm_view.setBackgroundColor(getResources().getColor(R.color.lowerGradientColorForLoginBackground, getActivity().getTheme()));
- 
--//        profileImage = v.findViewById(R.id.edit_profile_image);
-+        profileImage = v.findViewById(R.id.edit_profile_image);
-         editImage = v.findViewById(R.id.edit_profile_picture);
-         username = v.findViewById(R.id.edit_username);
-         email = v.findViewById(R.id.edit_email);
-@@ -86,60 +92,99 @@
-         save = v.findViewById(R.id.btn_save);
- 
- 
-+
-+
-         mRootref = mDataref.getInstance().getReference();
-         //DatabaseReference firebaseDatabase = FirebaseDatabase.getInstance().getReference();
--        final String userUid =  mAuth.getInstance().getCurrentUser().getUid();
-+        //final String userUid =  mAuth.getInstance().getCurrentUser().getUid();
-         //mRootref = mDataref.getReference().child("Users").child(userUid);
-         //mRootref.addValueEventListener(new ValueEventListener() {
-+        //StorageReference storageReference = FirebaseStorage.getInstance().getReference().child(apartmentList.get(position).getImage_url().get(0));
-+
-+
-+
-         mRootref.child("Users").child(userUid).addValueEventListener(new ValueEventListener() {
--                @Override
--                public void onDataChange(@NonNull DataSnapshot snapshot) {
--                    User user = snapshot.getValue(User.class);
--                    username.setText(user.getName());
--                    bio.setText(user.getBio());
--                    email.setText(user.getEmail());
--//                    Glide.with(getActivity()).load(user.getImageurl()).into(profileImage);
--                }
-+            @Override
-+            public void onDataChange(@NonNull DataSnapshot snapshot) {
-+                User user = snapshot.getValue(User.class);
-+                username.setText(user.getName());
-+                bio.setText(user.getBio());
-+                email.setText(user.getEmail());
-+
-+                String url = snapshot.child("image").getValue(String.class);
-+                GlideApp.with(getActivity().getApplicationContext())
-+                        .load(url)
-+                        .circleCrop()
-+                        .placeholder(R.drawable.ic_user_profile_svgrepo_com)
-+                        .into(profileImage);
-+            }
- 
--                @Override
--                public void onCancelled(@NonNull DatabaseError error) {
-+            @Override
-+            public void onCancelled(@NonNull DatabaseError error) {
- 
--                }
--            });
-+            }
-+        });
- 
--//            profileImage.setOnClickListener(new View.OnClickListener() {
--//                @Override
--//                public void onClick(View v) {
--//                    openImage();
--//                }
--//            });
-+        profileImage.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                openImage();
-+              //  CropImage.activity().setCropShape(CropImageView.CropShape.OVAL).start(getActivity());
-+            }
-+        });
- 
--            editImage.setOnClickListener(new View.OnClickListener() {
--                @Override
--                public void onClick(View v) {
--                    openImage();
--                }
--            });
-+        editImage.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+               openImage();
-+              //  CropImage.activity().setCropShape(CropImageView.CropShape.OVAL).start(getActivity());
-+            }
-+        });
- 
--            save.setOnClickListener(new View.OnClickListener() {
--                @Override
--                public void onClick(View v) {
--                    updateProfile();
--                }
--            });
--            return v;
--        }
-+        save.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                updateProfile();
-+            }
-+        });
-+
-+        pw.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                getFragment(new ChangePassword());
-+            }
-+        });
-+
-+        username.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                getFragment(new ChangeUsername());
-+            }
-+        });
-+
-+
-+        return v;
-+
-+    }
-+
-+    @Override
-+    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
-+        super.onViewCreated(view, savedInstanceState);
-+
-+
-+    }
-+
- 
- 
-     private void updateProfile() {
--        String txtName = username.getText().toString();
-+
-         String txtEmail = email.getText().toString();
-         String txtBio = bio.getText().toString();
- 
-         HashMap<String, Object> updateDetails = new HashMap<>();
--        updateDetails.put("name", txtName);
-         updateDetails.put("email", txtEmail);
-         updateDetails.put("bio", txtBio);
-+
-         mDataref.getInstance().getReference().child("Users").child(userUid).updateChildren(updateDetails).addOnCompleteListener(new OnCompleteListener<Void>() {
- 
-             @Override
-@@ -147,6 +192,7 @@
-                 if (task.isSuccessful()) {
-                     Toast.makeText(getActivity(), "Updated successfully", Toast.LENGTH_SHORT).show();
-                 }
-+
-             }
-         }).addOnFailureListener(new OnFailureListener() {
-             @Override
-@@ -156,7 +202,6 @@
-         });
-     }
- 
--
-     private void openImage() {
-         Intent intent = new Intent();
-         intent.setType("image/*");
-@@ -230,7 +275,7 @@
-         super.onActivityResult(requestCode, resultCode, data);
- 
-         if (requestCode == IMAGE_REQUEST && resultCode == getActivity().RESULT_OK && data !=null) {
--//            CropImage.ActivityResult result = CropImage.getActivityResult(data);
-+           // CropImage.ActivityResult result = CropImage.getActivityResult(data);
-             imageUri = data.getData();
- 
-             if (uploadTask !=null && uploadTask.isInProgress()){
-@@ -242,5 +287,13 @@
-             Toast.makeText(getActivity(), "Something went wrong!", Toast.LENGTH_SHORT).show();
-         }
-     }
-+    private void getFragment (Fragment fragment) {
-+        fm = getActivity().getSupportFragmentManager();
-+        ft = fm.beginTransaction();
-+        ft.addToBackStack(null);
-+        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
-+        ft.replace(R.id.fragmentContainer, fragment);
-+        ft.commit();
-+    }
- 
- }
-\ No newline at end of file
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    package=\"com.example.shroomies\">\r\n\r\n    <!--\r\n         The ACCESS_COARSE/FINE_LOCATION permissions are not required to use\r\n         Google Maps Android API v2, but you must specify either coarse or fine\r\n         location permissions for the \"MyLocation\" functionality.\r\n    -->\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n\r\n    <application\r\n        android:name=\".Home\"\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/AppTheme\">\r\n\r\n        <!--\r\n             The API key for Google Maps-based APIs is defined as a string resource.\r\n             (See the file \"res/values/google_maps_api.xml\").\r\n             Note that the API key is linked to the encryption key used to sign the APK.\r\n             You need a different API key for each encryption key, including the release key that is used to\r\n             sign the APK for publishing.\r\n             You can define the keys for the debug and release targets in src/debug/ and src/release/.\r\n        -->\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_key\" />\r\n\r\n        <activity android:name=\".ResetPassword\" />\r\n        <activity android:name=\".MainActivity\" />\r\n        <activity android:name=\".SignUpActivity\" />\r\n        <activity android:name=\".ApartmentViewPage\" />\r\n        <activity android:name=\".LoginActivity\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.gms.version\"\r\n            android:value=\"@integer/google_play_services_version\" />\r\n        <meta-data\r\n            android:name=\"preloaded_fonts\"\r\n            android:resource=\"@array/preloaded_fonts\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 2cfe63513da0dc90e980ed1feb4dd8265400dedc)
-+++ app/src/main/AndroidManifest.xml	(date 1609354420863)
-@@ -52,6 +52,11 @@
-         <meta-data
-             android:name="preloaded_fonts"
-             android:resource="@array/preloaded_fonts" />
-+        <activity
-+            android:name="com.theartofdev.edmodo.cropper.CropImageActivity"
-+            android:theme="@style/Base.Theme.AppCompat" />
-     </application>
- 
-+
-+
- </manifest>
-\ No newline at end of file
-Index: app/src/main/java/com/example/shroomies/ChangePassword.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/shroomies/ChangePassword.java	(date 1610473923714)
-+++ app/src/main/java/com/example/shroomies/ChangePassword.java	(date 1610473923714)
-@@ -0,0 +1,104 @@
-+package com.example.shroomies;
-+
-+import android.os.Bundle;
-+
-+import androidx.annotation.NonNull;
-+import androidx.annotation.Nullable;
-+import androidx.fragment.app.Fragment;
-+
-+import android.util.Log;
-+import android.view.LayoutInflater;
-+import android.view.View;
-+import android.view.ViewGroup;
-+import android.widget.Button;
-+import android.widget.EditText;
-+import android.widget.ImageButton;
-+import android.widget.Toast;
-+
-+import com.google.android.gms.tasks.OnCompleteListener;
-+import com.google.android.gms.tasks.Task;
-+import com.google.firebase.auth.AuthCredential;
-+import com.google.firebase.auth.EmailAuthCredential;
-+import com.google.firebase.auth.EmailAuthProvider;
-+import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.auth.FirebaseUser;
-+import com.google.firebase.database.DatabaseReference;
-+
-+public class ChangePassword extends Fragment {
-+    private EditText cur_password;
-+    private EditText new_password;
-+    private EditText rep_password;
-+    private ImageButton change_password;
-+
-+    private FirebaseUser mUser;
-+    private FirebaseAuth mAuth;
-+    private DatabaseReference mRootref;
-+
-+    View v;
-+
-+    @Override
-+    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-+                             Bundle savedInstanceState) {
-+        // Inflate the layout for this fragment
-+        v = inflater.inflate(R.layout.fragment_change_password, container, false);
-+        cur_password = v.findViewById(R.id.current_password);
-+        new_password = v.findViewById(R.id.edit_password);
-+        rep_password = v.findViewById(R.id.edit_repeat_password);
-+
-+        change_password = v.findViewById(R.id.password_button);
-+
-+        change_password.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                newPassword();
-+            }
-+        });
-+
-+
-+        return v;
-+    }
-+
-+    private void newPassword() {
-+        if (cur_password.toString().isEmpty() && new_password.toString().isEmpty() && rep_password.toString().isEmpty()){
-+            Toast.makeText(getContext(), "Please fill all fields", Toast.LENGTH_SHORT).show();
-+        } else {
-+            if((new_password.getText().toString()).equals(rep_password.getText().toString())){
-+                //final String userUid =  mAuth.getInstance().getCurrentUser().getUid();
-+                mUser = mAuth.getInstance().getCurrentUser();
-+
-+                AuthCredential credential = EmailAuthProvider.getCredential(mUser.getEmail(), cur_password.getText().toString());
-+                mUser.reauthenticate(credential).addOnCompleteListener(new OnCompleteListener<Void>() {
-+                    @Override
-+                    public void onComplete(@NonNull Task<Void> task) {
-+                        if(task.isSuccessful()){
-+                            mUser.updatePassword(new_password.getText().toString()).addOnCompleteListener(new OnCompleteListener<Void>() {
-+                                @Override
-+                                public void onComplete(@NonNull Task<Void> task) {
-+                                    if(task.isSuccessful()){
-+                                        Toast.makeText(getContext(), "Password updated successfully", Toast.LENGTH_SHORT).show();
-+                                    }
-+                                    else {
-+                                        Toast.makeText(getContext(), "Error! Password not updated", Toast.LENGTH_SHORT).show();
-+                                    }
-+                                }
-+                            });
-+                        }
-+                        else {
-+                            Toast.makeText(getContext(), "Authorization failed", Toast.LENGTH_SHORT).show();
-+                        }
-+                    }
-+                });
-+
-+            } else {
-+                Toast.makeText(getContext(), "Password mismatch. Please enter the same password in new password and repeat password.", Toast.LENGTH_SHORT).show();
-+            }
-+        }
-+    }
-+
-+
-+    @Override
-+    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
-+        super.onViewCreated(view, savedInstanceState);
-+
-+    }
-+}
-\ No newline at end of file
-Index: app/src/main/res/layout/fragment_change_username.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/fragment_change_username.xml	(date 1610474734785)
-+++ app/src/main/res/layout/fragment_change_username.xml	(date 1610474734785)
-@@ -0,0 +1,104 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:tools="http://schemas.android.com/tools"
-+    android:layout_width="match_parent"
-+    android:layout_height="match_parent"
-+    tools:context=".ChangeUsername">
-+
-+   <androidx.cardview.widget.CardView
-+       android:id="@+id/username_card"
-+       android:layout_width="350dp"
-+       android:layout_height="400dp"
-+       android:layout_marginTop="100dp"
-+       android:layout_centerHorizontal="true"
-+       android:layout_centerVertical="true"
-+       android:background="@drawable/post_card_rectangle_round"
-+       android:elevation="20dp"
-+       android:padding="20dp"
-+       >
-+
-+       <RelativeLayout
-+           android:layout_width="match_parent"
-+           android:layout_height="377dp">
-+
-+           <TextView
-+               android:id="@+id/textview_username"
-+               android:layout_width="wrap_content"
-+               android:layout_height="wrap_content"
-+               android:layout_marginStart="5dp"
-+               android:layout_marginLeft="10dp"
-+               android:layout_marginTop="20dp"
-+               android:layout_marginRight="10dp"
-+               android:padding="20dp"
-+               android:text="Username:"
-+               android:textColor="@color/Black"
-+               android:textSize="20dp"
-+               android:textStyle="bold" />
-+
-+           <TextView
-+               android:id="@+id/textview_cur_username"
-+               android:layout_width="169dp"
-+               android:layout_height="wrap_content"
-+               android:layout_above="@+id/text_enter_newUsername"
-+
-+               android:layout_alignEnd="@+id/textview_username"
-+               android:layout_marginLeft="20dp"
-+               android:layout_marginEnd="-183dp"
-+               android:layout_marginRight="10dp"
-+               android:layout_marginBottom="1dp"
-+               android:padding="20dp"
-+               android:text=""
-+               android:textSize="20dp"
-+               android:textStyle="bold" />
-+
-+           <TextView
-+               android:id="@+id/text_enter_newUsername"
-+               android:layout_width="wrap_content"
-+               android:layout_height="wrap_content"
-+               android:layout_below="@+id/textview_username"
-+               android:layout_marginStart="5dp"
-+               android:layout_marginLeft="10dp"
-+               android:layout_marginTop="20dp"
-+               android:layout_marginRight="10dp"
-+               android:padding="20dp"
-+               android:text="Enter a new username:"
-+               android:textColor="@color/Black"
-+               android:textSize="20dp" />
-+
-+           <EditText
-+               android:id="@+id/new_username"
-+               android:layout_width="wrap_content"
-+               android:layout_height="80dp"
-+               android:layout_below="@id/text_enter_newUsername"
-+               android:layout_centerHorizontal="true"
-+               android:layout_marginLeft="10dp"
-+               android:layout_marginTop="10dp"
-+               android:layout_marginRight="10dp"
-+               android:background="@drawable/textbox_round"
-+               android:elevation="3dp"
-+               android:inputType="text"
-+               android:padding="20dp"
-+               android:textSize="20sp"></EditText>
-+
-+           <Button
-+               android:id="@+id/change_username"
-+               android:layout_width="250dp"
-+               android:layout_height="50dp"
-+               android:layout_below="@+id/new_username"
-+               android:layout_centerInParent="true"
-+               android:layout_marginTop="50dp"
-+               android:background="@drawable/publish_post_button"
-+               android:padding="10dp"
-+               android:text="Change username"
-+               android:textColor="@color/white"
-+               android:textSize="20dp"
-+               android:textStyle="bold">
-+
-+           </Button>
-+
-+
-+       </RelativeLayout>
-+
-+
-+</androidx.cardview.widget.CardView>
-+</RelativeLayout>
-\ No newline at end of file
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17-Dec-20_00_57__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17-Dec-20_00_57__Default_Changelist_.xml
Index: app/src/main/res/layout/fragment_post_detail.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".PostDetail\">\r\n\r\n    <com.google.android.material.appbar.AppBarLayout\r\n        android:id=\"@+id/bar\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"?android:attr/windowBackground\">\r\n\r\n        <androidx.appcompat.widget.Toolbar\r\n            android:id=\"@+id/toolbar\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"?android:attr/windowBackground\">\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:textSize=\"18sp\"\r\n                    android:text=\"Description\"\r\n                    android:textColor=\"@color/colorPrimaryDark\"\r\n                    android:textStyle=\"bold\"/>\r\n\r\n            </RelativeLayout>\r\n\r\n        </androidx.appcompat.widget.Toolbar>\r\n    </com.google.android.material.appbar.AppBarLayout>\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_below=\"@id/bar\"\r\n        android:id=\"@+id/recycler_view\"\r\n        android:layout_height=\"wrap_content\"/>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_post_detail.xml	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/res/layout/fragment_post_detail.xml	(date 1611246633937)
@@ -25,7 +25,7 @@
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:textSize="18sp"
-                    android:text="Description"
+                    android:text=" "
                     android:textColor="@color/colorPrimaryDark"
                     android:textStyle="bold"/>
 
Index: app/src/main/java/com/example/shroomies/ApartmentViewPage.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.content.Context;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.location.Geocoder;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.viewpager.widget.PagerAdapter;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport com.bumptech.glide.load.resource.bitmap.CenterCrop;\r\nimport com.bumptech.glide.load.resource.bitmap.CircleCrop;\r\nimport com.bumptech.glide.load.resource.bitmap.RoundedCorners;\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.model.BitmapDescriptorFactory;\r\nimport com.google.android.gms.maps.model.LatLng;\r\nimport com.google.android.gms.maps.model.MarkerOptions;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.make.dots.dotsindicator.DotsIndicator;\r\n\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\npublic class ApartmentViewPage extends AppCompatActivity implements OnMapReadyCallback {\r\n    ViewPager viewPager;\r\n    Button messageButton;\r\n    DotsIndicator dotsIndicator;\r\n    TextView priceTextView;\r\n    TextView descriptionTextView;\r\n    ViewPagerAdapterApartmentView viewPagerAdapterApartmentView;\r\n    Apartment apartment;\r\n    TextView numberOfRoomMates;\r\n    TextView date;\r\n    TextView username;\r\n    CustomMapView mapView;\r\n    GoogleMap mMap;\r\n    TextView locationAddressTextView;\r\n    Geocoder geocoder;\r\n    Toolbar toolbar;\r\n    private static final String MAPVIEW_BUNDLE_KEY = \"MapViewBundleKey\";\r\n\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_apartment_page);\r\n        if(getIntent().getExtras()!=null) {\r\n            apartment = new Apartment();\r\n            apartment = getIntent().getExtras().getParcelable(\"apartment\");\r\n        }\r\n            locationAddressTextView = findViewById(R.id.location_address_text_view);\r\n            viewPager = findViewById(R.id.view_pager_apartment_view);\r\n            dotsIndicator = findViewById(R.id.dotsIndicator_apartment_view);\r\n            priceTextView = findViewById(R.id.price_text_view);\r\n            descriptionTextView = findViewById(R.id.user_description_text_view);\r\n            numberOfRoomMates = findViewById(R.id.number_of_roommates_text_view);\r\n            date = findViewById(R.id.date_of_post_text_view);\r\n            username = findViewById(R.id.name_of_user_text_view);\r\n            mapView = findViewById(R.id.apartment_post_page_map);\r\n            toolbar = (Toolbar) findViewById(R.id.toolbar);\r\n            setSupportActionBar(toolbar);\r\n            getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n            getSupportActionBar().setDisplayShowHomeEnabled(true);\r\n            initGoogleMap(savedInstanceState);\r\n\r\n            mapView.getMapAsync(this);\r\n\r\n            //set the desicription\r\n            descriptionTextView.setText(apartment.getDescription());\r\n            //set the no of roommates\r\n            numberOfRoomMates.setText(Integer.toString(apartment.getNumberOfRoommates()));\r\n            // set the date\r\n            date.setText(apartment.getDate());\r\n\r\n            //set the location address\r\n        geocoder = new Geocoder(getApplicationContext());\r\n        try {\r\n            // for some reason the latitude and the longitude are saved oppositly\r\n            locationAddressTextView.setText(geocoder.getFromLocation(apartment.getLatitude(), apartment.getLongitude(),1).get(0).getAddressLine(0));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        // get the username and profile picture from the database\r\n            DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference(\"Users\").child(apartment.getUserID());\r\n\r\n            databaseReference.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    User user = new User();\r\n                    user = snapshot.getValue(User.class);\r\n                    username.setText(user.getName());\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n\r\n            viewPagerAdapterApartmentView = new ViewPagerAdapterApartmentView(getApplicationContext(), apartment.getImage_url());\r\n            viewPager.setAdapter(viewPagerAdapterApartmentView);\r\n            dotsIndicator.setViewPager(viewPager);\r\n            viewPager.getAdapter().registerDataSetObserver(dotsIndicator.getDataSetObserver());\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n            mapView.onStart();\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n\r\n            mapView.onStop();\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n\r\n            mapView.onDestroy();\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n\r\n            mapView.onPause();\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n\r\n            mapView.onResume();\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onLowMemory() {\r\n        super.onLowMemory();\r\n\r\n            mapView.onLowMemory();\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onSaveInstanceState(@NonNull Bundle outState) {\r\n        super.onSaveInstanceState(outState);\r\n        Bundle mapViewBundle = outState.getBundle(MAPVIEW_BUNDLE_KEY);\r\n        if (mapViewBundle == null) {\r\n            mapViewBundle = new Bundle();\r\n            outState.putBundle(MAPVIEW_BUNDLE_KEY, mapViewBundle);\r\n        }\r\n        if(mapView!=null) {\r\n            mapView.onSaveInstanceState(outState);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap) {\r\n\r\n        if(apartment!=null) {\r\n            Toast.makeText(getApplicationContext(), Double.toString(apartment.getLatitude()) , Toast.LENGTH_LONG).show();\r\n\r\n            LatLng latLng = new LatLng(apartment.getLatitude(), apartment.getLongitude());\r\n            Bitmap bitmap = BitmapFactory.decodeResource(getResources(), getResources().getIdentifier(\"black_mushroom\", \"drawable\", getApplicationContext().getPackageName()));\r\n            Bitmap resizedBitmap = Bitmap.createScaledBitmap(bitmap, 90, 100, false);\r\n            MarkerOptions markerOptions = new MarkerOptions()\r\n                    .position(latLng)\r\n                    .icon(BitmapDescriptorFactory.fromBitmap(resizedBitmap));\r\n            if (googleMap != null) {\r\n                googleMap.addMarker(markerOptions);\r\n                googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(latLng, 16));\r\n            }\r\n        }\r\n    }\r\n\r\n    private void initGoogleMap(Bundle savedInstanceState) {\r\n        // *** IMPORTANT ***\r\n        // MapView requires that the Bundle you pass contain _ONLY_ MapView SDK\r\n        // objects or sub-Bundles.\r\n        Bundle mapViewBundle = null;\r\n        if (savedInstanceState != null) {\r\n            mapViewBundle = savedInstanceState.getBundle(MAPVIEW_BUNDLE_KEY);\r\n        }\r\n\r\n        mapView.onCreate(mapViewBundle);\r\n        mapView.getMapAsync(this);\r\n\r\n\r\n    }\r\n\r\n    }\r\n\r\n\r\n// create a new view pager adapter\r\nclass ViewPagerAdapterApartmentView extends PagerAdapter {\r\n    Context context;\r\n    private List<String> imageUrls;\r\n    ViewPagerAdapterApartmentView(Context context , List<String> imageUrls){\r\n        this.context = context;\r\n        this.imageUrls = imageUrls;\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        return imageUrls.size();\r\n    }\r\n\r\n    @Override\r\n    public boolean isViewFromObject(@NonNull View view, @NonNull Object object) {\r\n        return view==object;\r\n    }\r\n\r\n\r\n    @NonNull\r\n    @Override\r\n    public Object instantiateItem(@NonNull ViewGroup container, int position) {\r\n        ImageView imageView = new ImageView(context);\r\n\r\n\r\n\r\n        StorageReference storageReference = FirebaseStorage.getInstance().getReference().child(imageUrls.get(position));\r\n        Toast.makeText(context, imageUrls.get(position),Toast.LENGTH_LONG).show();\r\n        // Load the image using Glide\r\n        GlideApp.with(this.context)\r\n                .load(storageReference)\r\n                .transform(new CenterCrop())\r\n                .into(imageView);\r\n\r\n        ViewPager vp = (ViewPager) container;\r\n        vp.addView(imageView);\r\n        return imageView;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void destroyItem(@NonNull ViewGroup container, int position, @NonNull Object object) {\r\n        container.removeView((View)object);\r\n    }\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/ApartmentViewPage.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/ApartmentViewPage.java	(date 1611246634062)
@@ -18,6 +18,7 @@
 import androidx.appcompat.widget.Toolbar;
 import androidx.viewpager.widget.PagerAdapter;
 import androidx.viewpager.widget.ViewPager;
+import com.bumptech.glide.Glide;
 
 import com.bumptech.glide.load.resource.bitmap.CenterCrop;
 import com.bumptech.glide.load.resource.bitmap.CircleCrop;
Index: app/src/main/res/layout/fragment_edit_profile.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.core.widget.NestedScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".EditProfile\"\r\n    android:layout_marginTop=\"60dp\"\r\n    android:layout_marginBottom=\"50dp\"\r\n    android:background=\"@drawable/gradient_yellow_background\">\r\n\r\n<RelativeLayout\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n    <TextView\r\n        android:elevation=\"5dp\"\r\n        android:background=\"@drawable/edit_profile_text_view\"\r\n        android:paddingLeft=\"20dp\"\r\n        android:paddingRight=\"20dp\"\r\n        android:paddingTop=\"10dp\"\r\n        android:paddingBottom=\"10dp\"\r\n        android:textSize=\"20dp\"\r\n        android:id=\"@+id/edit_profile_text_view\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Edit profile\"\r\n        android:layout_alignParentStart=\"true\"\r\n        android:layout_marginTop=\"40dp\">\r\n\r\n    </TextView>\r\n    <ImageButton\r\n        android:id=\"@+id/edit_profile_picture\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_toRightOf=\"@+id/edit_profile_image\"\r\n        android:layout_below=\"@id/edit_profile_text_view\"\r\n        android:src=\"@drawable/ic_icon_awesome_edit\"\r\n        android:elevation=\"5dp\"\r\n        android:background=\"@drawable/button_round\"\r\n        android:layout_marginLeft=\"-15dp\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:padding=\"6dp\"\r\n        />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/edit_profile_image\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:padding=\"10dp\"\r\n        android:layout_marginTop=\"5dp\"\r\n        android:layout_marginBottom=\"5dp\"\r\n        android:background=\"@drawable/circle_white_button\"\r\n        android:layout_below=\"@id/edit_profile_text_view\"\r\n        android:src=\"@drawable/ic_user_profile_svgrepo_com\"/>\r\n\r\n    <Button\r\n        android:id=\"@+id/account_settings_button\"\r\n        android:layout_below=\"@+id/edit_profile_image\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"30dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        android:text=\"account settings \"\r\n        android:background=\"@drawable/button_round_alabaster\"\r\n       android:paddingLeft=\"5dp\"\r\n        android:paddingRight=\"5dp\"\r\n        android:drawableStart=\"@drawable/ic_icon_ionic_ios_settings\"\r\n        android:drawablePadding=\"5dp\"\r\n        android:textSize=\"9dp\">\r\n\r\n    </Button>\r\n\r\n    <EditText\r\n        android:id=\"@+id/edit_bio\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_below=\"@id/account_settings_button\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginLeft=\"10dp\"\r\n\r\n        android:layout_marginRight=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:alpha=\"0.8\"\r\n        android:background=\"@drawable/textbox_round\"\r\n        android:drawableStart=\"@drawable/ic_icon_feather_info\"\r\n        android:drawableEnd=\"@drawable/ic_icon_ionic_ios_arrow_back\"\r\n        android:drawablePadding=\"8dp\"\r\n        android:elevation=\"3dp\"\r\n\r\n        android:padding=\"10dp\"\r\n        android:text=\"Bio\">\r\n\r\n    </EditText>\r\n\r\n    <EditText\r\n        android:id=\"@+id/edit_username\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_below=\"@id/edit_bio\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:alpha=\"0.8\"\r\n        android:background=\"@drawable/textbox_round\"\r\n        android:drawableEnd=\"@drawable/ic_icon_ionic_ios_arrow_back\"\r\n        android:elevation=\"3dp\"\r\n        android:padding=\"10dp\"\r\n        android:text=\"Username\">\r\n\r\n    </EditText>\r\n    <EditText\r\n        android:padding=\"10dp\"\r\n        android:id=\"@+id/edit_email\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"50dp\"\r\n        android:elevation=\"3dp\"\r\n        android:background=\"@drawable/textbox_round\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:text=\"Email\"\r\n        android:layout_below=\"@id/edit_username\"\r\n        android:layout_margin=\"10dp\"\r\n        android:drawableEnd=\"@drawable/ic_icon_ionic_ios_arrow_back\"\r\n        >\r\n    </EditText>\r\n\r\n    <Button\r\n        android:id=\"@+id/edit_password\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"50dp\"\r\n        android:layout_below=\"@id/edit_email\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:layout_marginTop=\"10dp\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        android:layout_marginBottom=\"10dp\"\r\n        android:alpha=\"0.8\"\r\n        android:background=\"@drawable/textbox_round\"\r\n        android:drawableEnd=\"@drawable/ic_icon_ionic_ios_arrow_back\"\r\n        android:elevation=\"3dp\"\r\n        android:padding=\"10dp\"\r\n        android:text=\"Change Password\">\r\n\r\n    </Button>\r\n\r\n    <Button\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:id=\"@+id/btn_save\"\r\n        android:layout_marginTop=\"15dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:background=\"@drawable/button_round\"\r\n        android:text=\"Save\"\r\n        android:textColor=\"@color/colorAccent\"\r\n        android:layout_below=\"@+id/edit_password\"\r\n        />\r\n</RelativeLayout>\r\n</androidx.core.widget.NestedScrollView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_edit_profile.xml	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/res/layout/fragment_edit_profile.xml	(date 1611246633949)
@@ -93,7 +93,7 @@
 
     </EditText>
 
-    <EditText
+    <Button
         android:id="@+id/edit_username"
         android:layout_width="wrap_content"
         android:layout_height="50dp"
@@ -108,9 +108,9 @@
         android:drawableEnd="@drawable/ic_icon_ionic_ios_arrow_back"
         android:elevation="3dp"
         android:padding="10dp"
-        android:text="Username">
+        android:text="Change Username">
 
-    </EditText>
+    </Button>
     <EditText
         android:padding="10dp"
         android:id="@+id/edit_email"
@@ -153,8 +153,21 @@
         android:layout_centerHorizontal="true"
         android:background="@drawable/button_round"
         android:text="Save"
-        android:textColor="@color/colorAccent"
+        android:textColor="@color/Black"
         android:layout_below="@+id/edit_password"
         />
+
+    <Button
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:id="@+id/btn_delete"
+        android:layout_marginTop="15dp"
+        android:padding="10dp"
+        android:layout_centerHorizontal="true"
+        android:background="@drawable/button_round"
+        android:text="Delete account"
+        android:textColor="@color/Black"
+        android:layout_below="@+id/btn_save"
+        />
 </RelativeLayout>
 </androidx.core.widget.NestedScrollView>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_user_profile.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".UserProfile\">\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:id=\"@+id/tv_my_profile\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"200dp\">\r\n\r\n\r\n            <ImageView\r\n                android:id=\"@+id/profile_image\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"94dp\"\r\n                android:layout_alignParentLeft=\"true\"\r\n                android:layout_alignParentTop=\"true\"\r\n                android:layout_centerHorizontal=\"true\"\r\n                android:layout_marginHorizontal=\"20dp\"\r\n                android:layout_marginVertical=\"20dp\"\r\n                android:layout_marginStart=\"20dp\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginTop=\"36dp\"\r\n                android:layout_marginBottom=\"5dp\"\r\n                android:background=\"@drawable/circle_white_button\"\r\n                android:padding=\"10dp\"\r\n                android:src=\"@drawable/ic_user_profile_svgrepo_com\"></ImageView>\r\n\r\n            <TextView\r\n                android:id=\"@+id/view_username\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_alignParentTop=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginStart=\"22dp\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginTop=\"21dp\"\r\n                android:layout_marginEnd=\"205dp\"\r\n                android:layout_marginRight=\"10dp\"\r\n                android:layout_toEndOf=\"@+id/profile_image\"\r\n                android:text=\" \"\r\n                android:textColor=\"#131212\"\r\n                android:textSize=\"20sp\"\r\n                android:textStyle=\"bold\">\r\n\r\n            </TextView>\r\n\r\n            <TextView\r\n                android:id=\"@+id/view_bio\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/view_username\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginStart=\"122dp\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginTop=\"3dp\"\r\n                android:layout_marginEnd=\"199dp\"\r\n                android:layout_marginRight=\"10dp\"\r\n                android:text=\" \"\r\n                android:textColor=\"#0E0E0E\"\r\n                android:textSize=\"20sp\"\r\n                android:textStyle=\"bold\">\r\n\r\n            </TextView>\r\n\r\n            <TextView\r\n                android:id=\"@+id/number_posts\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginStart=\"94dp\"\r\n                android:layout_marginLeft=\"20dp\"\r\n                android:layout_marginTop=\"11dp\"\r\n                android:layout_marginEnd=\"10dp\"\r\n                android:layout_marginRight=\"10dp\"\r\n                android:layout_marginBottom=\"93dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:text=\" \"\r\n                ></TextView>\r\n\r\n            <Button\r\n                android:id=\"@+id/edit_profile_button_my_profile\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_alignParentBottom=\"true\"\r\n                android:layout_marginEnd=\"2dp\"\r\n                android:text=\"edit profile\">\r\n\r\n            </Button>\r\n\r\n        </RelativeLayout>\r\n    </androidx.cardview.widget.CardView>\r\n\r\n    <TextView\r\n        android:id=\"@+id/posts\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@+id/tv_my_profile\"\r\n        android:layout_marginTop=\"5dp\"\r\n        android:text=\"My Posts\"\r\n        android:textColor=\"#070707\"\r\n        android:textSize=\"20sp\"\r\n        android:textStyle=\"bold\"\r\n        android:padding=\"10dp\"\r\n        android:layout_marginLeft=\"5dp\"/>\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@id/posts\"\r\n        android:id=\"@+id/recycler_view\"/>\r\n\r\n\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_user_profile.xml	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/res/layout/fragment_user_profile.xml	(date 1611246633962)
@@ -39,10 +39,10 @@
                 android:layout_height="wrap_content"
                 android:layout_alignParentTop="true"
                 android:layout_alignParentEnd="true"
-                android:layout_marginStart="22dp"
+                android:layout_marginStart="20dp"
                 android:layout_marginLeft="20dp"
-                android:layout_marginTop="21dp"
-                android:layout_marginEnd="205dp"
+                android:layout_marginTop="41dp"
+                android:layout_marginEnd="207dp"
                 android:layout_marginRight="10dp"
                 android:layout_toEndOf="@+id/profile_image"
                 android:text=" "
@@ -59,10 +59,10 @@
                 android:layout_below="@+id/view_username"
                 android:layout_alignParentStart="true"
                 android:layout_alignParentEnd="true"
-                android:layout_marginStart="122dp"
+                android:layout_marginStart="119dp"
                 android:layout_marginLeft="20dp"
-                android:layout_marginTop="3dp"
-                android:layout_marginEnd="199dp"
+                android:layout_marginTop="14dp"
+                android:layout_marginEnd="201dp"
                 android:layout_marginRight="10dp"
                 android:text=" "
                 android:textColor="#0E0E0E"
@@ -84,6 +84,9 @@
                 android:layout_marginBottom="93dp"
                 android:layout_alignParentRight="true"
                 android:text=" "
+                android:textStyle="bold"
+                android:textColor="@color/Black"
+                android:textSize="20sp"
                 ></TextView>
 
             <Button
Index: app/src/main/java/com/example/shroomies/UserProfile.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\n\r\npublic class UserProfile extends Fragment {\r\n    private Button editProfile;\r\n    private TextView viewUsername;\r\n    private TextView viewBio;\r\n    private TextView numPosts;\r\n    private TextView posts;\r\n    private ImageView profileImage;\r\n\r\n    private FirebaseUser mUser;\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseDatabase mDataref;\r\n    private DatabaseReference mRootref;\r\n\r\n    final String userUid =  mAuth.getInstance().getCurrentUser().getUid();\r\n\r\n    String profileid;\r\n    private RecyclerView recyclerView;\r\n    private PhotosAdapter photosAdapter;\r\n    private List<Post> postList;\r\n\r\n    FragmentManager fm;\r\n    FragmentTransaction ft;\r\n\r\n   View v;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        v=inflater.inflate(R.layout.fragment_user_profile, container, false);\r\n        editProfile = v.findViewById(R.id.edit_profile_button_my_profile);\r\n        profileImage = v.findViewById(R.id.profile_image);\r\n        viewUsername = v.findViewById(R.id.view_username);\r\n        viewBio = v.findViewById(R.id.view_bio);\r\n        numPosts = v.findViewById(R.id.number_posts);\r\n//        SharedPreferences prefs = getContext().getSharedPreferences(\"PREFS\", Context.MODE_PRIVATE);\r\n//        profileid = prefs.getString(\"profileid\", \"none\");\r\n\r\n        posts = v.findViewById(R.id.number_posts);\r\n        recyclerView = v.findViewById(R.id.recycler_view);\r\n        recyclerView.setHasFixedSize(true);\r\n        LinearLayoutManager mLayoutManager = new LinearLayoutManager(getContext());\r\n        recyclerView.setLayoutManager(mLayoutManager);\r\n        postList = new ArrayList<>();\r\n        photosAdapter = new PhotosAdapter(getContext(), postList);\r\n        recyclerView.setAdapter(photosAdapter);\r\n        recyclerView.setVisibility(View.VISIBLE);\r\n\r\n        //getNumPosts();\r\n        getPosts();\r\n\r\n\r\n        mRootref = mDataref.getInstance().getReference();\r\n        mRootref.child(\"Users\").child(userUid).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                User user = snapshot.getValue(User.class);\r\n                viewUsername.setText(user.getName());\r\n                viewBio.setText(user.getBio());\r\n                String url = snapshot.child(\"image\").getValue(String.class);\r\n                GlideApp.with(getActivity().getApplicationContext())\r\n                        .load(url)\r\n                        .circleCrop()\r\n                        .placeholder(R.drawable.ic_user_profile_svgrepo_com)\r\n                        .into(profileImage);\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        return v;\r\n    }\r\n\r\n//    private void getNumPosts(){\r\n//        DatabaseReference reference = FirebaseDatabase.getInstance().getReference(\"postApartment\");\r\n//        reference.addValueEventListener(new ValueEventListener() {\r\n//            @Override\r\n//            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n//                int i=0;\r\n//                for (DataSnapshot snapshot: dataSnapshot.getChildren()){\r\n//                    Post post = snapshot.getValue(Post.class);\r\n//                    if(post.getUserID().equals(profileid)){\r\n//                        i++;\r\n//                    }\r\n//                }\r\n//                posts.setText(\"\" +i+ \" Posts\");\r\n//            }\r\n//\r\n//            @Override\r\n//            public void onCancelled(@NonNull DatabaseError error) {\r\n//\r\n//            }\r\n//        });\r\n//    }\r\n\r\n    private void getPosts(){\r\n        profileid =  mAuth.getInstance().getCurrentUser().getUid();\r\n        DatabaseReference reference = FirebaseDatabase.getInstance().getReference(\"postApartment\");\r\n        reference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                postList.clear();\r\n                for(DataSnapshot snapshot: dataSnapshot.getChildren()){\r\n                    Post post = snapshot.getValue(Post.class);\r\n                    if (post.getUserID().equals(profileid)){\r\n                        postList.add(post);\r\n                    }\r\n                    }\r\n                Collections.reverse(postList);\r\n                photosAdapter.notifyDataSetChanged();\r\n          }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        editProfile.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                getFragment(new EditProfile());\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void getFragment (Fragment fragment) {\r\n        fm = getActivity().getSupportFragmentManager();\r\n        ft = fm.beginTransaction();\r\n        ft.addToBackStack(null);\r\n        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);\r\n        ft.replace(R.id.fragmentContainer, fragment);\r\n        ft.commit();\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/UserProfile.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/UserProfile.java	(date 1611246634097)
@@ -9,7 +9,7 @@
 import androidx.fragment.app.FragmentTransaction;
 import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
-
+import com.bumptech.glide.Glide;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -77,7 +77,7 @@
         recyclerView.setAdapter(photosAdapter);
         recyclerView.setVisibility(View.VISIBLE);
 
-        //getNumPosts();
+        getNumPosts();
         getPosts();
 
 
@@ -105,27 +105,27 @@
         return v;
     }
 
-//    private void getNumPosts(){
-//        DatabaseReference reference = FirebaseDatabase.getInstance().getReference("postApartment");
-//        reference.addValueEventListener(new ValueEventListener() {
-//            @Override
-//            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
-//                int i=0;
-//                for (DataSnapshot snapshot: dataSnapshot.getChildren()){
-//                    Post post = snapshot.getValue(Post.class);
-//                    if(post.getUserID().equals(profileid)){
-//                        i++;
-//                    }
-//                }
-//                posts.setText("" +i+ " Posts");
-//            }
-//
-//            @Override
-//            public void onCancelled(@NonNull DatabaseError error) {
-//
-//            }
-//        });
-//    }
+    private void getNumPosts(){
+        DatabaseReference reference = FirebaseDatabase.getInstance().getReference("postApartment");
+        reference.addValueEventListener(new ValueEventListener() {
+            @Override
+            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {
+                int i=0;
+                for (DataSnapshot snapshot: dataSnapshot.getChildren()){
+                    Post post = snapshot.getValue(Post.class);
+                    if(post.getUserID().equals(profileid)){
+                        i++;
+                    }
+                }
+                posts.setText("" +i+ " Posts");
+            }
+
+            @Override
+            public void onCancelled(@NonNull DatabaseError error) {
+
+            }
+        });
+    }
 
     private void getPosts(){
         profileid =  mAuth.getInstance().getCurrentUser().getUid();
Index: app/src/main/java/com/example/shroomies/EditProfile.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.ContentResolver;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.webkit.MimeTypeMap;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.google.android.gms.tasks.Continuation;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.EmailAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.UserInfo;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.StorageTask;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.theartofdev.edmodo.cropper.CropImage;\r\nimport com.theartofdev.edmodo.cropper.CropImageView;\r\n\r\nimport java.util.HashMap;\r\n\r\n\r\n\r\n\r\npublic class EditProfile extends Fragment {\r\n\r\n    FragmentManager fm;\r\n    FragmentTransaction ft;\r\n\r\n    View v;\r\n    private ImageView profileImage;\r\n    private ImageButton editImage;\r\n\r\n    private EditText email;\r\n    private EditText bio;\r\n\r\n    private Button pw;\r\n    private Button save;\r\n    private EditText username;\r\n    private FirebaseUser mUser;\r\n    private FirebaseDatabase mDataref;\r\n    private FirebaseAuth mAuth;\r\n    private DatabaseReference mRootref;\r\n    private Uri imageUri;\r\n    private StorageTask uploadTask;\r\n    private StorageReference storageRef;\r\n\r\n    final String userUid =  mAuth.getInstance().getCurrentUser().getUid();\r\n\r\n\r\n    private static final int IMAGE_REQUEST= 1;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v = inflater.inflate(R.layout.fragment_edit_profile, container, false);\r\n        MainActivity.btm_view.setBackgroundColor(getResources().getColor(R.color.lowerGradientColorForLoginBackground, getActivity().getTheme()));\r\n\r\n        profileImage = v.findViewById(R.id.edit_profile_image);\r\n        editImage = v.findViewById(R.id.edit_profile_picture);\r\n        username = v.findViewById(R.id.edit_username);\r\n        email = v.findViewById(R.id.edit_email);\r\n        pw = v.findViewById(R.id.edit_password);\r\n        bio = v.findViewById(R.id.edit_bio);\r\n        save = v.findViewById(R.id.btn_save);\r\n\r\n\r\n\r\n        mRootref = mDataref.getInstance().getReference();\r\n\r\n\r\n        mRootref.child(\"Users\").child(userUid).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                User user = snapshot.getValue(User.class);\r\n                username.setText(user.getName());\r\n                bio.setText(user.getBio());\r\n                email.setText(user.getEmail());\r\n\r\n                String url = snapshot.child(\"image\").getValue(String.class);\r\n                GlideApp.with(getActivity().getApplicationContext())\r\n                        .load(url)\r\n                        .circleCrop()\r\n                        .placeholder(R.drawable.ic_user_profile_svgrepo_com)\r\n                        .into(profileImage);\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        profileImage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                openImage();\r\n              //  CropImage.activity().setCropShape(CropImageView.CropShape.OVAL).start(getActivity());\r\n            }\r\n        });\r\n\r\n        editImage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n               openImage();\r\n              //  CropImage.activity().setCropShape(CropImageView.CropShape.OVAL).start(getActivity());\r\n            }\r\n        });\r\n\r\n        save.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                updateProfile();\r\n            }\r\n        });\r\n\r\n        pw.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                getFragment(new ChangePassword());\r\n            }\r\n        });\r\n\r\n        username.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                getFragment(new ChangeUsername());\r\n            }\r\n        });\r\n\r\n\r\n        return v;\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    private void updateProfile() {\r\n\r\n        String txtEmail = email.getText().toString();\r\n        String txtBio = bio.getText().toString();\r\n\r\n        HashMap<String, Object> updateDetails = new HashMap<>();\r\n        updateDetails.put(\"email\", txtEmail);\r\n        updateDetails.put(\"bio\", txtBio);\r\n\r\n        mDataref.getInstance().getReference().child(\"Users\").child(userUid).updateChildren(updateDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                if (task.isSuccessful()) {\r\n                    Toast.makeText(getActivity(), \"Updated successfully\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n    \r\n    private void openImage() {\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        startActivityForResult(intent, IMAGE_REQUEST);\r\n    }\r\n\r\n    private String getFileExtension(Uri uri){\r\n        ContentResolver contentResolver = getContext().getContentResolver();\r\n        MimeTypeMap mimeTypeMap = MimeTypeMap.getSingleton();\r\n        return mimeTypeMap.getExtensionFromMimeType(contentResolver.getType(uri));\r\n    }\r\n\r\n\r\n\r\n    private void uploadImage(){\r\n        final ProgressDialog pd = new ProgressDialog(getActivity());\r\n        pd.setMessage(\"Uploading\");\r\n        pd.show();\r\n\r\n\r\n        if (imageUri !=null){\r\n            storageRef = FirebaseStorage.getInstance().getReference();\r\n            final StorageReference fileRef = storageRef.child(\"profile pictures\").child(System.currentTimeMillis() + \".\" + getFileExtension(imageUri));\r\n            uploadTask = fileRef.putFile(imageUri);\r\n            uploadTask.continueWithTask(new Continuation<UploadTask.TaskSnapshot, Task <Uri>>() {\r\n                @Override\r\n                public Task <Uri> then(@NonNull Task <UploadTask.TaskSnapshot> task) throws Exception {\r\n                    if(!task.isSuccessful()){\r\n                        throw task.getException();\r\n                    }\r\n\r\n                    return fileRef.getDownloadUrl();\r\n                }\r\n            }).addOnCompleteListener(new OnCompleteListener<Uri>() {\r\n                @Override\r\n                public void onComplete(@NonNull Task<Uri> task) {\r\n                    if (task.isSuccessful()){\r\n                        Uri downloadUri = task.getResult();\r\n                        String mUrl = downloadUri.toString();\r\n                        HashMap <String, Object> imageDetails = new HashMap<>();\r\n                        imageDetails.put(\"image\", mUrl);\r\n                        mDataref.getInstance().getReference().child(\"Users\").child(userUid).updateChildren(imageDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                if (task.isSuccessful()) {\r\n                                    Toast.makeText(getActivity(), \"Uploaded successfully\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                        });\r\n                        pd.dismiss();\r\n                    }\r\n                    else{\r\n                        Toast.makeText(getActivity(), \"Upload failed\",Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    Toast.makeText(getActivity(),e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            Toast.makeText(getActivity(), \"No image selected\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == IMAGE_REQUEST && resultCode == getActivity().RESULT_OK && data !=null) {\r\n           // CropImage.ActivityResult result = CropImage.getActivityResult(data);\r\n            imageUri = data.getData();\r\n\r\n            if (uploadTask !=null && uploadTask.isInProgress()){\r\n                Toast.makeText(getContext(), \"Upload is in progress\", Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                uploadImage();\r\n            }\r\n        } else {\r\n            Toast.makeText(getActivity(), \"Something went wrong!\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n    private void getFragment (Fragment fragment) {\r\n        fm = getActivity().getSupportFragmentManager();\r\n        ft = fm.beginTransaction();\r\n        ft.addToBackStack(null);\r\n        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);\r\n        ft.replace(R.id.fragmentContainer, fragment);\r\n        ft.commit();\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/EditProfile.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/EditProfile.java	(date 1611246634114)
@@ -1,7 +1,9 @@
 package com.example.shroomies;
 
+import android.app.AlertDialog;
 import android.app.ProgressDialog;
 import android.content.ContentResolver;
+import android.content.DialogInterface;
 import android.content.Intent;
 import android.net.Uri;
 import android.os.Bundle;
@@ -13,6 +15,8 @@
 import androidx.fragment.app.FragmentTransaction;
 import androidx.recyclerview.widget.RecyclerView;
 
+import android.text.Editable;
+import android.text.TextWatcher;
 import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
@@ -64,9 +68,7 @@
     private EditText email;
     private EditText bio;
 
-    private Button pw;
-    private Button save;
-    private EditText username;
+    private Button pw, save, delete, username;
     private FirebaseUser mUser;
     private FirebaseDatabase mDataref;
     private FirebaseAuth mAuth;
@@ -76,13 +78,12 @@
     private StorageReference storageRef;
 
     final String userUid =  mAuth.getInstance().getCurrentUser().getUid();
-
+    AlertDialog.Builder builder;
 
     private static final int IMAGE_REQUEST= 1;
 
     @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                             Bundle savedInstanceState) {
+    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
         // Inflate the layout for this fragment
         View v = inflater.inflate(R.layout.fragment_edit_profile, container, false);
         MainActivity.btm_view.setBackgroundColor(getResources().getColor(R.color.lowerGradientColorForLoginBackground, getActivity().getTheme()));
@@ -94,12 +95,12 @@
         pw = v.findViewById(R.id.edit_password);
         bio = v.findViewById(R.id.edit_bio);
         save = v.findViewById(R.id.btn_save);
-
+        delete = v.findViewById(R.id.btn_delete);
+        builder = new AlertDialog.Builder(getActivity());
 
 
         mRootref = mDataref.getInstance().getReference();
 
-
         mRootref.child("Users").child(userUid).addValueEventListener(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
@@ -122,11 +123,43 @@
             }
         });
 
+        delete.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                builder.setMessage("Are you sure you want to delete your account?").setCancelable(false)
+                        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
+                            @Override
+                            public void onClick(DialogInterface dialog, int id) {
+                                mUser = mAuth.getInstance().getCurrentUser();
+                                mUser.delete().addOnCompleteListener(new OnCompleteListener<Void>() {
+                                    @Override
+                                    public void onComplete(@NonNull Task<Void> task) {
+                                        if (task.isSuccessful()){
+                                            Toast.makeText(getActivity(), "Account deleted", Toast.LENGTH_SHORT).show();
+                                            Intent intent = new Intent(getContext(), LoginActivity.class);
+                                            startActivity(intent);
+                                        }
+                                    }
+                                });
+                            }
+                        })
+                        .setNegativeButton("No", new DialogInterface.OnClickListener() {
+                            @Override
+                            public void onClick(DialogInterface dialog, int which) {
+                                dialog.cancel();
+
+                            }
+                        });
+                AlertDialog alert = builder.create();
+                alert.show();
+            }
+        });
+
         profileImage.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v) {
                 openImage();
-              //  CropImage.activity().setCropShape(CropImageView.CropShape.OVAL).start(getActivity());
+
             }
         });
 
@@ -134,7 +167,7 @@
             @Override
             public void onClick(View v) {
                openImage();
-              //  CropImage.activity().setCropShape(CropImageView.CropShape.OVAL).start(getActivity());
+
             }
         });
 
@@ -175,19 +208,32 @@
 
     private void updateProfile() {
 
-        String txtEmail = email.getText().toString();
-        String txtBio = bio.getText().toString();
+        final DatabaseReference old_email = mDataref.getInstance().getReference().child("Users").child(userUid).child("email");
+
+        final String txtEmail = email.getText().toString();
+        final String txtBio = bio.getText().toString();
+
+//        if ((old_email.toString()).equals((txtEmail))){
+//
+//        } else {
+//            sendEmailVerification();
+//        }
 
         HashMap<String, Object> updateDetails = new HashMap<>();
         updateDetails.put("email", txtEmail);
         updateDetails.put("bio", txtBio);
 
+
         mDataref.getInstance().getReference().child("Users").child(userUid).updateChildren(updateDetails).addOnCompleteListener(new OnCompleteListener<Void>() {
 
             @Override
             public void onComplete(@NonNull Task<Void> task) {
                 if (task.isSuccessful()) {
-                    Toast.makeText(getActivity(), "Updated successfully", Toast.LENGTH_SHORT).show();
+                  // Toast.makeText(getActivity(), "Updated successfully", Toast.LENGTH_SHORT).show();
+                   Toast.makeText(getActivity(), "old=" + old_email.toString() + " new="+ txtEmail, Toast.LENGTH_LONG).show();
+
+
+
                 }
 
             }
@@ -197,8 +243,54 @@
                 Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();
             }
         });
+
+//        email.addTextChangedListener(new TextWatcher() {
+//            @Override
+//            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
+//            }
+//
+//            @Override
+//            public void onTextChanged(CharSequence s, int start, int before, int count) {
+//
+//            }
+//            @Override
+//            public void afterTextChanged(Editable s) {
+
+//            }
+//        });
+
+    }
+
+    private void sendEmailVerification() {
+        mUser = mAuth.getInstance().getCurrentUser();
+
+        mUser.updateEmail(email.getText().toString()).addOnCompleteListener(new OnCompleteListener<Void>() {
+            @Override
+            public void onComplete(@NonNull Task<Void> task) {
+                if(!task.isSuccessful()){
+                    //  Toast.makeText(getContext(), "Error! Try again", Toast.LENGTH_SHORT).show();
+                }
+                else {
+                    final FirebaseUser user = mAuth.getInstance().getCurrentUser();
+                    user.sendEmailVerification().addOnCompleteListener(new OnCompleteListener<Void>() {
+                        @Override
+                        public void onComplete(@NonNull Task<Void> task) {
+                            if (task.isSuccessful()) {
+                                Toast.makeText(getActivity(), "Updated Successfully. Verification email sent to " + mUser.getEmail(), Toast.LENGTH_SHORT).show();
+                                Intent intent = new Intent(getActivity(), LoginActivity.class);
+                                startActivity(intent);
+
+                            } else {
+                                // Toast.makeText(getActivity(), "Failed to send verification email", Toast.LENGTH_SHORT).show();
+                            }
+                        }
+                    });
+                }
+            }
+        });
+
     }
-    
+
     private void openImage() {
         Intent intent = new Intent();
         intent.setType("image/*");
@@ -293,4 +385,5 @@
         ft.commit();
     }
 
-}
\ No newline at end of file
+}
+
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <string name=\"app_name\">Shroomies</string>\r\n\r\n    <string name=\"open\" />\r\n    <string name=\"close\" />\r\n    <!-- TODO: Remove or change this placeholder text -->\r\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\r\n    <string name=\"title_activity_login\">LoginActivity</string>\r\n    <!--\r\n    This string is used for square devices and overridden by hello_world in\r\n    values-round/strings.xml for round devices.\r\n    -->\r\n    <string name=\"hello_world\">Hello Square World!</string>\r\n    <string name=\"google_maps_api_key\">AIzaSyBxsKC0T7r-jozZk-mZUScW7wPN5zB_7pg</string>\r\n    <string name=\"Heading_discover\">Discover</string>\r\n    <string name=\"title_activity_group_chatting\">GroupChattingActivity</string>\r\n\r\n    <string-array name=\"spinner_options\">\r\n        <item>Importance</item>\r\n        <item>latest</item>\r\n        <item>Oldest</item>\r\n        <item>Title</item>\r\n    </string-array>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values/strings.xml	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/res/values/strings.xml	(date 1611246634128)
@@ -11,7 +11,7 @@
     values-round/strings.xml for round devices.
     -->
     <string name="hello_world">Hello Square World!</string>
-    <string name="google_maps_api_key">AIzaSyBxsKC0T7r-jozZk-mZUScW7wPN5zB_7pg</string>
+    <string name="google_maps_key">AIzaSyBxsKC0T7r-jozZk-mZUScW7wPN5zB_7pg</string>
     <string name="Heading_discover">Discover</string>
     <string name="title_activity_group_chatting">GroupChattingActivity</string>
 
Index: app/src/main/res/layout/post_item.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <TextView\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"8dp\"\r\n        android:textColor=\"@color/colorPrimaryDark\"\r\n        android:id=\"@+id/date\"/>\r\n\r\n    <ImageView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:id=\"@+id/post_image\"\r\n        android:layout_below=\"@+id/date\"\r\n        />\r\n\r\n\r\n\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"8dp\"\r\n            android:textColor=\"@color/colorPrimaryDark\"\r\n            android:id=\"@+id/description\"\r\n            android:layout_below=\"@+id/post_image\"/>\r\n\r\n    <TextView\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"8dp\"\r\n        android:layout_below=\"@+id/description\"\r\n        android:textColor=\"@color/colorPrimaryDark\"\r\n        android:textStyle=\"bold\"\r\n        android:id=\"@+id/userID\"/>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/post_item.xml	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/res/layout/post_item.xml	(date 1611246633971)
@@ -28,13 +28,13 @@
             android:id="@+id/description"
             android:layout_below="@+id/post_image"/>
 
-    <TextView
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_marginStart="8dp"
-        android:layout_below="@+id/description"
-        android:textColor="@color/colorPrimaryDark"
-        android:textStyle="bold"
-        android:id="@+id/userID"/>
+<!--    <TextView-->
+<!--        android:layout_width="wrap_content"-->
+<!--        android:layout_height="wrap_content"-->
+<!--        android:layout_marginStart="8dp"-->
+<!--        android:layout_below="@+id/description"-->
+<!--        android:textColor="@color/colorPrimaryDark"-->
+<!--        android:textStyle="bold"-->
+<!--        android:id="@+id/userID"/>-->
 
 </RelativeLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/shroomies/ChangeUsername.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.cardview.widget.CardView;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.HashMap;\r\n\r\npublic class ChangeUsername extends Fragment {\r\n    private FirebaseUser mUser;\r\n    private FirebaseDatabase mDataref;\r\n    private FirebaseAuth mAuth;\r\n    private DatabaseReference mRootref;\r\n    final String userUid =  mAuth.getInstance().getCurrentUser().getUid();\r\n\r\n    private EditText username;\r\n    private TextView currentUsername;\r\n    private Button saveUsername;\r\n    CardView cardUsername;\r\n\r\n    View v;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        v=inflater.inflate(R.layout.fragment_change_username, container, false);\r\n\r\n        username = v.findViewById(R.id.new_username);\r\n        currentUsername = v.findViewById(R.id.textview_cur_username);\r\n        saveUsername = v.findViewById(R.id.change_username);\r\n        cardUsername = v.findViewById(R.id.username_card);\r\n\r\n        mRootref = mDataref.getInstance().getReference();\r\n        mRootref.child(\"Users\").child(userUid).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    User user = snapshot.getValue(User.class);\r\n                    currentUsername.setText(user.getName());\r\n                }\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        saveUsername.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                updateUsername();\r\n            }\r\n        });\r\n        return v;\r\n    }\r\n\r\n    private void updateUsername() {\r\n        String txtName = username.getText().toString();\r\n\r\n        HashMap<String, Object> updateDetails = new HashMap<>();\r\n        updateDetails.put(\"name\", txtName);\r\n\r\n        mDataref.getInstance().getReference().child(\"Users\").child(userUid).updateChildren(updateDetails).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n                if (task.isSuccessful()) {\r\n                    Toast.makeText(getActivity(), \"Updated username successfully\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/ChangeUsername.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/ChangeUsername.java	(date 1611246634140)
@@ -1,10 +1,12 @@
 package com.example.shroomies;
 
+import android.content.Intent;
 import android.os.Bundle;
 
 import androidx.annotation.NonNull;
 import androidx.cardview.widget.CardView;
 import androidx.fragment.app.Fragment;
+import androidx.fragment.app.FragmentActivity;
 
 import android.view.LayoutInflater;
 import android.view.View;
@@ -85,6 +87,7 @@
             public void onComplete(@NonNull Task<Void> task) {
                 if (task.isSuccessful()) {
                     Toast.makeText(getActivity(), "Updated username successfully", Toast.LENGTH_SHORT).show();
+
                 }
             }
         }).addOnFailureListener(new OnFailureListener() {
@@ -93,5 +96,8 @@
                 Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();
             }
         });
+        ((FragmentActivity)getContext()).getSupportFragmentManager().beginTransaction().replace(R.id.fragmentContainer,
+                new EditProfile()).commit();
     }
+
 }
\ No newline at end of file
Index: app/src/main/res/layout/fragment_change_username.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ChangeUsername\">\r\n\r\n   <androidx.cardview.widget.CardView\r\n       android:id=\"@+id/username_card\"\r\n       android:layout_width=\"350dp\"\r\n       android:layout_height=\"400dp\"\r\n       android:layout_marginTop=\"100dp\"\r\n       android:layout_centerHorizontal=\"true\"\r\n       android:layout_centerVertical=\"true\"\r\n       android:background=\"@drawable/post_card_rectangle_round\"\r\n       android:elevation=\"20dp\"\r\n       android:padding=\"20dp\"\r\n       >\r\n\r\n       <RelativeLayout\r\n           android:layout_width=\"match_parent\"\r\n           android:layout_height=\"377dp\">\r\n\r\n           <TextView\r\n               android:id=\"@+id/textview_username\"\r\n               android:layout_width=\"wrap_content\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:layout_marginStart=\"5dp\"\r\n               android:layout_marginLeft=\"10dp\"\r\n               android:layout_marginTop=\"20dp\"\r\n               android:layout_marginRight=\"10dp\"\r\n               android:padding=\"20dp\"\r\n               android:text=\"Username:\"\r\n               android:textColor=\"@color/Black\"\r\n               android:textSize=\"20dp\"\r\n               android:textStyle=\"bold\" />\r\n\r\n           <TextView\r\n               android:id=\"@+id/textview_cur_username\"\r\n               android:layout_width=\"169dp\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:layout_above=\"@+id/text_enter_newUsername\"\r\n\r\n               android:layout_alignEnd=\"@+id/textview_username\"\r\n               android:layout_marginLeft=\"20dp\"\r\n               android:layout_marginEnd=\"-183dp\"\r\n               android:layout_marginRight=\"10dp\"\r\n               android:layout_marginBottom=\"1dp\"\r\n               android:padding=\"20dp\"\r\n               android:text=\"\"\r\n               android:textSize=\"20dp\"\r\n               android:textStyle=\"bold\" />\r\n\r\n           <TextView\r\n               android:id=\"@+id/text_enter_newUsername\"\r\n               android:layout_width=\"wrap_content\"\r\n               android:layout_height=\"wrap_content\"\r\n               android:layout_below=\"@+id/textview_username\"\r\n               android:layout_marginStart=\"5dp\"\r\n               android:layout_marginLeft=\"10dp\"\r\n               android:layout_marginTop=\"20dp\"\r\n               android:layout_marginRight=\"10dp\"\r\n               android:padding=\"20dp\"\r\n               android:text=\"Enter a new username:\"\r\n               android:textColor=\"@color/Black\"\r\n               android:textSize=\"20dp\" />\r\n\r\n           <EditText\r\n               android:id=\"@+id/new_username\"\r\n               android:layout_width=\"wrap_content\"\r\n               android:layout_height=\"80dp\"\r\n               android:layout_below=\"@id/text_enter_newUsername\"\r\n               android:layout_centerHorizontal=\"true\"\r\n               android:layout_marginLeft=\"10dp\"\r\n               android:layout_marginTop=\"10dp\"\r\n               android:layout_marginRight=\"10dp\"\r\n               android:background=\"@drawable/textbox_round\"\r\n               android:elevation=\"3dp\"\r\n               android:inputType=\"text\"\r\n               android:padding=\"20dp\"\r\n               android:textSize=\"20sp\"></EditText>\r\n\r\n           <Button\r\n               android:id=\"@+id/change_username\"\r\n               android:layout_width=\"250dp\"\r\n               android:layout_height=\"50dp\"\r\n               android:layout_below=\"@+id/new_username\"\r\n               android:layout_centerInParent=\"true\"\r\n               android:layout_marginTop=\"50dp\"\r\n               android:background=\"@drawable/publish_post_button\"\r\n               android:padding=\"10dp\"\r\n               android:text=\"Change username\"\r\n               android:textColor=\"@color/white\"\r\n               android:textSize=\"20dp\"\r\n               android:textStyle=\"bold\">\r\n\r\n           </Button>\r\n\r\n\r\n       </RelativeLayout>\r\n\r\n\r\n</androidx.cardview.widget.CardView>\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_change_username.xml	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/res/layout/fragment_change_username.xml	(date 1611246633981)
@@ -76,9 +76,10 @@
                android:layout_marginRight="10dp"
                android:background="@drawable/textbox_round"
                android:elevation="3dp"
-               android:inputType="text"
+               android:inputType="textPersonName|textCapWords"
                android:padding="20dp"
-               android:textSize="20sp"></EditText>
+               android:textSize="20sp"
+               ></EditText>
 
            <Button
                android:id="@+id/change_username"
Index: app/src/main/java/com/example/shroomies/ChangePassword.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.EmailAuthCredential;\r\nimport com.google.firebase.auth.EmailAuthProvider;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DatabaseReference;\r\n\r\npublic class ChangePassword extends Fragment {\r\n    private EditText cur_password;\r\n    private EditText new_password;\r\n    private EditText rep_password;\r\n    private ImageButton change_password;\r\n\r\n    private FirebaseUser mUser;\r\n    private FirebaseAuth mAuth;\r\n    private DatabaseReference mRootref;\r\n\r\n    View v;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        v = inflater.inflate(R.layout.fragment_change_password, container, false);\r\n        cur_password = v.findViewById(R.id.current_password);\r\n        new_password = v.findViewById(R.id.edit_password);\r\n        rep_password = v.findViewById(R.id.edit_repeat_password);\r\n\r\n        change_password = v.findViewById(R.id.password_button);\r\n\r\n        change_password.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                newPassword();\r\n            }\r\n        });\r\n\r\n\r\n        return v;\r\n    }\r\n\r\n    private void newPassword() {\r\n        if (cur_password.toString().isEmpty() && new_password.toString().isEmpty() && rep_password.toString().isEmpty()){\r\n            Toast.makeText(getContext(), \"Please fill all fields\", Toast.LENGTH_SHORT).show();\r\n        } else {\r\n            if((new_password.getText().toString()).equals(rep_password.getText().toString())){\r\n                //final String userUid =  mAuth.getInstance().getCurrentUser().getUid();\r\n                mUser = mAuth.getInstance().getCurrentUser();\r\n\r\n                AuthCredential credential = EmailAuthProvider.getCredential(mUser.getEmail(), cur_password.getText().toString());\r\n                mUser.reauthenticate(credential).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        if(task.isSuccessful()){\r\n                            mUser.updatePassword(new_password.getText().toString()).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                @Override\r\n                                public void onComplete(@NonNull Task<Void> task) {\r\n                                    if(task.isSuccessful()){\r\n                                        Toast.makeText(getContext(), \"Password updated successfully\", Toast.LENGTH_SHORT).show();\r\n                                    }\r\n                                    else {\r\n                                        Toast.makeText(getContext(), \"Error! Password not updated\", Toast.LENGTH_SHORT).show();\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                        else {\r\n                            Toast.makeText(getContext(), \"Authorization failed\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                Toast.makeText(getContext(), \"Password mismatch. Please enter the same password in new password and repeat password.\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/ChangePassword.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/ChangePassword.java	(date 1611246634154)
@@ -5,6 +5,7 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.fragment.app.Fragment;
+import androidx.fragment.app.FragmentActivity;
 
 import android.util.Log;
 import android.view.LayoutInflater;
@@ -61,7 +62,10 @@
     private void newPassword() {
         if (cur_password.toString().isEmpty() && new_password.toString().isEmpty() && rep_password.toString().isEmpty()){
             Toast.makeText(getContext(), "Please fill all fields", Toast.LENGTH_SHORT).show();
-        } else {
+        } else if(cur_password.length() < 6 ){
+            Toast.makeText(getContext(), "Password too short", Toast.LENGTH_SHORT).show();
+        }
+        else {
             if((new_password.getText().toString()).equals(rep_password.getText().toString())){
                 //final String userUid =  mAuth.getInstance().getCurrentUser().getUid();
                 mUser = mAuth.getInstance().getCurrentUser();
@@ -93,7 +97,10 @@
                 Toast.makeText(getContext(), "Password mismatch. Please enter the same password in new password and repeat password.", Toast.LENGTH_SHORT).show();
             }
         }
+        ((FragmentActivity)getContext()).getSupportFragmentManager().beginTransaction().replace(R.id.fragmentContainer,
+                new EditProfile()).commit();
     }
+
 
 
     @Override
Index: app/src/main/java/com/example/shroomies/ViewPagerAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.shroomies;\r\n\r\nimport android.content.Context;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.net.Uri;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.viewpager.widget.PagerAdapter;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.bumptech.glide.load.MultiTransformation;\r\nimport com.bumptech.glide.load.resource.bitmap.CenterCrop;\r\nimport com.bumptech.glide.load.resource.bitmap.RoundedCorners;\r\nimport com.google.android.gms.maps.model.Circle;\r\nimport com.squareup.picasso.Picasso;\r\nimport com.squareup.picasso.Transformation;\r\n\r\nimport java.util.List;\r\n\r\nimport jp.wasabeef.picasso.transformations.RoundedCornersTransformation;\r\n\r\npublic class ViewPagerAdapter extends PagerAdapter {\r\n    Context context;\r\n    private List<Uri> imageUris;\r\n    ViewPagerAdapter(Context context , List<Uri> imageUris){\r\n        this.context = context;\r\n        this.imageUris = imageUris;\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        return imageUris.size();\r\n    }\r\n\r\n    @Override\r\n    public boolean isViewFromObject(@NonNull View view, @NonNull Object object) {\r\n        return view==object;\r\n    }\r\n\r\n\r\n    @NonNull\r\n    @Override\r\n    public Object instantiateItem(@NonNull ViewGroup container, int position) {\r\n        ImageView imageView = new ImageView(context);\r\n        imageView.setPadding(5,5,5,5);\r\n//        Transformation transformation = new context.getDrawable(R.drawable.post_card_rectangle_round));\r\n\r\n\r\n        MultiTransformation multiLeft = new MultiTransformation(new CenterCrop(), new RoundedCorners(25));\r\n\r\n//        Glide.with(context)\r\n//                .load(message.imageUrl)\r\n//                .apply(bitmapTransform(multiLeft))\r\n//                .into(aq.id(R.id.ivSingleImage).getImageView());\r\n\r\n        Glide.with(context)\r\n                .load(imageUris.get(position))\r\n                .transform(multiLeft)\r\n                .into(imageView);\r\n        container.addView(imageView);\r\n\r\n        return imageView;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void destroyItem(@NonNull ViewGroup container, int position, @NonNull Object object) {\r\n        container.removeView((View)object);\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/shroomies/ViewPagerAdapter.java	(revision 0b86b280642a1cd7af7665ef1cad9073631e9371)
+++ app/src/main/java/com/example/shroomies/ViewPagerAdapter.java	(date 1611246635586)
@@ -11,10 +11,6 @@
 import androidx.annotation.NonNull;
 import androidx.viewpager.widget.PagerAdapter;
 
-import com.bumptech.glide.Glide;
-import com.bumptech.glide.load.MultiTransformation;
-import com.bumptech.glide.load.resource.bitmap.CenterCrop;
-import com.bumptech.glide.load.resource.bitmap.RoundedCorners;
 import com.google.android.gms.maps.model.Circle;
 import com.squareup.picasso.Picasso;
 import com.squareup.picasso.Transformation;
@@ -50,17 +46,12 @@
         imageView.setPadding(5,5,5,5);
 //        Transformation transformation = new context.getDrawable(R.drawable.post_card_rectangle_round));
 
-
-        MultiTransformation multiLeft = new MultiTransformation(new CenterCrop(), new RoundedCorners(25));
-
-//        Glide.with(context)
-//                .load(message.imageUrl)
-//                .apply(bitmapTransform(multiLeft))
-//                .into(aq.id(R.id.ivSingleImage).getImageView());
-
-        Glide.with(context)
-                .load(imageUris.get(position))
-                .transform(multiLeft)
+        Picasso.get().load(imageUris.get(position))
+                .fit()
+                .centerCrop()
+                .transform(
+                        new RoundedCornersTransformation(50 ,0)
+                )
                 .into(imageView);
         container.addView(imageView);
 
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_17-Dec-20_00_57__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_17-Dec-20_00_57__Default_Changelist_.xml
